<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="ë¬˜ìš´">
  <meta name="theme-color" content="#1a1a2e">
  <meta name="description" content="ê¹Œì¹ í•œ ìš°ì£¼ ê³ ì–‘ì´ê°€ ì „í•˜ëŠ” ì˜¤ëŠ˜ì˜ ìš´ì„¸">
  
  <title>ë¬˜ìš´ MEOWUN</title>
  
  <link rel="manifest" href="manifest.json">
  <link rel="apple-touch-icon" href="icon.svg">
  <link rel="icon" type="image/svg+xml" href="icon.svg">
  
  <!-- ì¹´ì¹´ì˜¤ SDK -->
  <script src="https://t1.kakaocdn.net/kakao_js_sdk/2.5.0/kakao.min.js"></script>
  
  <!-- html2canvas (ì´ë¯¸ì§€ ì €ì¥ìš©) -->
  <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
  
  <link href="https://fonts.googleapis.com/css2?family=Gaegu:wght@300;400;700&display=swap" rel="stylesheet">
  
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    
    html, body {
      height: 100%;
      overflow: hidden;
      font-family: 'Gaegu', cursive;
    }
    
    body {
      background: linear-gradient(180deg, #13102a 0%, #1a1a2e 50%, #0d0d1a 100%);
      padding: env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left);
    }
    
    #root {
      height: 100%;
    }
    
    @keyframes twinkle {
      0%, 100% { opacity: 0.3; }
      50% { opacity: 1; }
    }
    
    @keyframes float {
      0%, 100% { transform: translateY(0px); }
      50% { transform: translateY(-10px); }
    }
    
    @keyframes pulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.05); }
    }
    
    @keyframes shimmer {
      0% { background-position: -200% 0; }
      100% { background-position: 200% 0; }
    }
    
    ::-webkit-scrollbar {
      display: none;
    }
    
    * {
      -webkit-tap-highlight-color: transparent;
    }
    
    /* ëª¨ë°”ì¼ ì…ë ¥ í•„ë“œ ìŠ¤íƒ€ì¼ */
    input[type="text"],
    input[type="number"],
    input[type="tel"],
    select {
      font-size: 16px !important; /* iOS í™•ëŒ€ ë°©ì§€ */
    }
  </style>
</head>
<body>
  <div id="root"></div>
  <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script type="text/babel">
    const { useState, useEffect, useRef } = React;

    // ì¹´ì¹´ì˜¤ ì´ˆê¸°í™”
    const KAKAO_KEY = 'a8f98dbc00e769be2ba0943380509ac0';

    // ì¿ íŒ¡íŒŒíŠ¸ë„ˆìŠ¤ ë°°ë„ˆ ì´ˆê¸°í™”
    const initCoupangBanner = () => {
      const banner = document.getElementById('coupang-banner');
      if (banner && window.PartnersCoupang && !banner.hasChildNodes()) {
        new window.PartnersCoupang.G({
          id: 800931,
          trackingCode: "AF6702889",
          subId: null,
          template: "carousel",
          width: "100%",
          height: "100"
        });
      }
    };

    // ë§í†  ì“´ ê²€ì€ ê³ ì–‘ì´ ìºë¦­í„° ì»´í¬ë„ŒíŠ¸
    const MeowunCat = ({ size = 100, style = {} }) => (
      <svg width={size} height={size} viewBox="0 0 100 100" style={style}>
        <defs>
          <linearGradient id="capeGradient" x1="0%" y1="0%" x2="0%" y2="100%">
            <stop offset="0%" stopColor="#6b21a8" />
            <stop offset="100%" stopColor="#3b0764" />
          </linearGradient>
          <radialGradient id="eyeGold" cx="50%" cy="30%" r="60%">
            <stop offset="0%" stopColor="#fde047" />
            <stop offset="50%" stopColor="#facc15" />
            <stop offset="100%" stopColor="#ca8a04" />
          </radialGradient>
          <filter id="glow">
            <feGaussianBlur stdDeviation="2" result="coloredBlur"/>
            <feMerge>
              <feMergeNode in="coloredBlur"/>
              <feMergeNode in="SourceGraphic"/>
            </feMerge>
          </filter>
        </defs>
        
        {/* ë§í†  */}
        <ellipse cx="50" cy="78" rx="40" ry="20" fill="url(#capeGradient)" />
        <path d="M10 65 Q5 78 15 92 Q30 100 50 100 Q70 100 85 92 Q95 78 90 65 Q75 52 50 56 Q25 52 10 65" fill="url(#capeGradient)" />
        
        {/* ë§í†  ë³„ ì¥ì‹ */}
        <circle cx="20" cy="80" r="1.5" fill="#fde047" opacity="0.9" />
        <circle cx="80" cy="78" r="1.2" fill="#fde047" opacity="0.8" />
        <circle cx="30" cy="90" r="1" fill="#fde047" opacity="0.7" />
        <circle cx="70" cy="88" r="1.3" fill="#fde047" opacity="0.8" />
        <circle cx="50" cy="94" r="1.2" fill="#fde047" opacity="0.6" />
        
        {/* ì–¼êµ´ */}
        <ellipse cx="50" cy="42" rx="34" ry="32" fill="#1f1f1f" />
        <ellipse cx="50" cy="38" rx="30" ry="26" fill="#171717" />
        
        {/* ê·€ */}
        <ellipse cx="22" cy="16" rx="11" ry="16" fill="#1f1f1f" />
        <ellipse cx="22" cy="16" rx="8" ry="12" fill="#171717" />
        <ellipse cx="22" cy="18" rx="4" ry="6" fill="#2d2d2d" opacity="0.5" />
        
        <ellipse cx="78" cy="16" rx="11" ry="16" fill="#1f1f1f" />
        <ellipse cx="78" cy="16" rx="8" ry="12" fill="#171717" />
        <ellipse cx="78" cy="18" rx="4" ry="6" fill="#2d2d2d" opacity="0.5" />
        
        {/* ëˆˆ */}
        <ellipse cx="35" cy="40" rx="13" ry="14" fill="url(#eyeGold)" stroke="#a16207" strokeWidth="1.5" filter="url(#glow)" />
        <ellipse cx="35" cy="42" rx="5" ry="8" fill="#0f0f0f" />
        <ellipse cx="32" cy="36" rx="4" ry="5" fill="#fff" opacity="0.95" />
        <circle cx="38" cy="46" r="2" fill="#fff" opacity="0.5" />
        
        <ellipse cx="65" cy="40" rx="13" ry="14" fill="url(#eyeGold)" stroke="#a16207" strokeWidth="1.5" filter="url(#glow)" />
        <ellipse cx="65" cy="42" rx="5" ry="8" fill="#0f0f0f" />
        <ellipse cx="62" cy="36" rx="4" ry="5" fill="#fff" opacity="0.95" />
        <circle cx="68" cy="46" r="2" fill="#fff" opacity="0.5" />
        
        {/* ì½” */}
        <path d="M50 52 L46 57 L54 57 Z" fill="#404040" />
        
        {/* ì… */}
        <path d="M50 57 L50 60" fill="none" stroke="#404040" strokeWidth="1.5" strokeLinecap="round" />
        <path d="M43 62 Q47 58 50 60 Q53 58 57 62" fill="none" stroke="#404040" strokeWidth="1.5" strokeLinecap="round" />
        
        {/* ìˆ˜ì—¼ */}
        <line x1="5" y1="46" x2="28" y2="50" stroke="#d4d4d4" strokeWidth="1" strokeLinecap="round" />
        <line x1="3" y1="52" x2="27" y2="52" stroke="#d4d4d4" strokeWidth="1" strokeLinecap="round" />
        <line x1="5" y1="58" x2="28" y2="54" stroke="#d4d4d4" strokeWidth="1" strokeLinecap="round" />
        <line x1="95" y1="46" x2="72" y2="50" stroke="#d4d4d4" strokeWidth="1" strokeLinecap="round" />
        <line x1="97" y1="52" x2="73" y2="52" stroke="#d4d4d4" strokeWidth="1" strokeLinecap="round" />
        <line x1="95" y1="58" x2="72" y2="54" stroke="#d4d4d4" strokeWidth="1" strokeLinecap="round" />
        
        {/* ë¸Œë¡œì¹˜ */}
        <polygon points="50,60 52,66 59,66 54,70 56,77 50,72 44,77 46,70 41,66 48,66" fill="#fde047" stroke="#ca8a04" strokeWidth="0.8" filter="url(#glow)" />
      </svg>
    );

    const MeowunApp = () => {
      // localStorageì—ì„œ ì €ì¥ëœ ì‚¬ìš©ì ì •ë³´ ë¶ˆëŸ¬ì˜¤ê¸°
      const getSavedUserData = () => {
        try {
          const saved = localStorage.getItem('meowun_user');
          if (saved) return JSON.parse(saved);
        } catch (e) {}
        return null;
      };

      const savedUser = getSavedUserData();
      
      const [screen, setScreen] = useState(savedUser ? 'main' : 'splash');
      const [userData, setUserData] = useState(savedUser || {
        name: '',
        birthYear: '',
        birthMonth: '',
        birthDay: '',
        birthHour: '',
      });
      const [showShareCard, setShowShareCard] = useState(false);
      const [showMyPage, setShowMyPage] = useState(false);
      const [isEditing, setIsEditing] = useState(false);
      const [todayFortune, setTodayFortune] = useState(null);
      const [isLoading, setIsLoading] = useState(savedUser ? true : false);
      const shareCardRef = useRef(null);

      useEffect(() => {
        if (savedUser && !todayFortune) {
          fetchFortune(savedUser);
        }
        // ì¹´ì¹´ì˜¤ SDK ì´ˆê¸°í™”
        if (window.Kakao && !window.Kakao.isInitialized()) {
          window.Kakao.init(KAKAO_KEY);
        }
      }, []);

      // ë©”ì¸ í™”ë©´ ì§„ì… ì‹œ ì¿ íŒ¡ ë°°ë„ˆ ì´ˆê¸°í™”
      useEffect(() => {
        if (screen === 'main' && !isLoading) {
          setTimeout(initCoupangBanner, 500);
        }
      }, [screen, isLoading]);

      const saveUserData = (data) => {
        try {
          localStorage.setItem('meowun_user', JSON.stringify(data));
        } catch (e) {}
      };

      // ì‚¬ì£¼ ê¸°ë°˜ ìš´ì„¸ ìƒì„±
      const generateFortune = (userInfo) => {
        const birthYear = parseInt(userInfo.birthYear) || 2000;
        const birthMonth = parseInt(userInfo.birthMonth) || 1;
        const birthDay = parseInt(userInfo.birthDay) || 1;
        const today = new Date();
        const todayDate = today.getDate();
        const todayMonth = today.getMonth() + 1;
        
        const heavenlyStems = ['ê°‘', 'ì„', 'ë³‘', 'ì •', 'ë¬´', 'ê¸°', 'ê²½', 'ì‹ ', 'ì„', 'ê³„'];
        const earthlyBranches = ['ì', 'ì¶•', 'ì¸', 'ë¬˜', 'ì§„', 'ì‚¬', 'ì˜¤', 'ë¯¸', 'ì‹ ', 'ìœ ', 'ìˆ ', 'í•´'];
        const fiveElements = ['ëª©', 'í™”', 'í† ', 'ê¸ˆ', 'ìˆ˜'];
        
        const yearStem = heavenlyStems[(birthYear - 4) % 10];
        const yearBranch = earthlyBranches[(birthYear - 4) % 12];
        const userElement = fiveElements[(birthYear - 4) % 5];
        
        const seed = (birthYear + birthMonth + birthDay + todayDate + todayMonth) % 100;
        
        const calcRating = (base) => {
          const raw = ((seed + base) % 9) / 2 + 1;
          return Math.round(raw * 2) / 2;
        };
        
        const overall = calcRating(0);
        const love = calcRating(17);
        const money = calcRating(31);
        const health = calcRating(47);
        const work = calcRating(61);
        
        const overallMessages = [
          "ì˜¤ëŠ˜ì€ ìš°ì£¼ê°€ ë„ˆí•œí…Œ ê´€ì‹¬ ìˆëŒ€.\në­˜ í•´ë„ ë  ê²ƒ ê°™ì€ ë‚ ì´ì•¼.\nê·¼ë° ë„ˆë¬´ ì„¤ì¹˜ì§„ ë§ˆ.",
          "í‰ë²”í•œ í•˜ë£¨ê°€ ë  ê±°ì•¼.\nê·¼ë° ê·¸ê²Œ ë‚˜ìœ ê±´ ì•„ë‹ˆì–ì•„.\nì¡°ìš©íˆ ë„¤ í•  ì¼ í•´.",
          "ì˜¤ëŠ˜ì€ ì¢€ ì‰¬ì–´.\në„¤ê°€ ëª»ë‚˜ì„œê°€ ì•„ë‹ˆì•¼.\nìš°ì£¼ ì»¨ë””ì…˜ì´ ë³„ë¡œì•¼.",
          "ë­”ê°€ ì¢‹ì€ ì¼ì´ ìƒê¸¸ ê¸°ìš´ì´ì•¼.\nê·¼ë° ê°€ë§Œíˆ ìˆìœ¼ë©´ ì•ˆ ì™€.\në‚˜ê°€ì„œ ì›€ì§ì—¬ë´.",
          "ì˜¤ëŠ˜ ì§ê°ì„ ë¯¿ì–´ë´.\në„¤ " + userElement + "ì˜ ê¸°ìš´ì´ ê°•í•˜ê±°ë“ .\nëŠë‚Œ ì˜¤ëŠ” ëŒ€ë¡œ í•´.",
          "ì¡°ì‹¬í•´ì•¼ í•  ë‚ ì´ì•¼.\ní° ê²°ì •ì€ ë¯¸ë¤„.\në‚´ì¼ ë‹¤ì‹œ ìƒê°í•´ë„ ëŠ¦ì§€ ì•Šì•„.",
          "ì˜¤ëŠ˜ì€ ì‚¬ëŒ ë§Œë‚˜ê¸° ì¢‹ì€ ë‚ .\n" + yearStem + yearBranch + "ë…„ìƒ íŠ¹ìœ ì˜ ë§¤ë ¥ì´\në¹›ë‚˜ëŠ” ë‚ ì´ê±°ë“ .",
          "ì—ë„ˆì§€ê°€ ì¢€ ë‚®ì„ ìˆ˜ ìˆì–´.\nì–µì§€ë¡œ í˜ë‚´ì§€ ë§ˆ.\níë¦„ì— ë§¡ê²¨ë´."
        ];
        
        const loveMessages = [
          "ëˆ„ê°€ ë„ ë³´ê³  ìˆê¸´ í•´... ëˆˆì¹˜ ì±™ê²¨.",
          "ì˜¤ëŠ˜ì€ ì—°ì• ìš´ ê´œì°®ì•„. ìš©ê¸° ë‚´ë´.",
          "ì†”ë¡œê°€ í¸í•œ ë‚ ë„ ìˆì–´. ì˜¤ëŠ˜ì´ ê·¸ë‚ .",
          "ì§ì‚¬ë‘ ì¤‘ì´ë©´ ì˜¤ëŠ˜ ì°¬ìŠ¤ì•¼.",
          "ì»¤í”Œì´ë©´ ì‹¸ìš°ì§€ ë§ˆ. ë³„ì´ ì•ˆ ì¢‹ì•„.",
          "ìƒˆë¡œìš´ ë§Œë‚¨ì˜ ê¸°ìš´ì´ ìˆì–´.",
          "ì˜¤ëŠ˜ì€ í˜¼ì ìˆëŠ” ê²Œ ë‚˜ì„ ë“¯.",
          "ê´€ê³„ì—ì„œ ì†”ì§í•´ì§€ë©´ ì¢‹ì€ ì¼ ìƒê²¨."
        ];
        
        const moneyMessages = [
          "ëˆ ì“°ì§€ ë§ˆ. ì§€ê°‘ì´ ë¸”ë™í™€ì´ì•¼.",
          "ì‘ì€ íš¡ì¬ ê°€ëŠ¥ì„± ìˆì–´.",
          "íˆ¬ìëŠ” ì˜¤ëŠ˜ ë§ê³ . ì œë°œ.",
          "ëˆ ë“¤ì–´ì˜¬ ê¸°ìš´ ìˆì–´.",
          "ì•„ë¼ëŠ” ê²Œ ë²„ëŠ” ê±°ì•¼.",
          "ê¸ˆì „ìš´ ì¢‹ì•„. ë°€ë¦° ëˆ ë°›ì„ ìˆ˜ë„?",
          "ì¶©ë™êµ¬ë§¤ ì£¼ì˜. ë³„ì´ ê²½ê³ í•´.",
          "í•„ìš”í•œ ê²ƒë§Œ ì‚¬."
        ];
        
        const healthMessages = [
          "ì¢€ ì‰¬ì–´. ìš°ì£¼ë„ ì‰¬ì–ì•„.",
          "ë¬¼ ë§ì´ ë§ˆì…”. ê¸°ë³¸ì´ ì¤‘ìš”í•´.",
          "ì˜¤ëŠ˜ ì»¨ë””ì…˜ ì¢‹ì„ ê±°ì•¼.",
          "ë¬´ë¦¬í•˜ì§€ ë§ˆ. ëª¸ì´ ì‹ í˜¸ ë³´ë‚´.",
          "ìŠ¤íŠ¸ë ˆì¹­ ì¢€ í•´.",
          "ì ì„ ì¶©ë¶„íˆ ì.",
          "ê±´ê°•ìš´ ì¢‹ì•„. í™œë ¥ ë„˜ì¹  ë“¯.",
          "ê³¼ì‹ ì£¼ì˜. ìœ„ì¥ì´ ì˜ˆë¯¼í•´."
        ];
        
        const workMessages = [
          "ê¸‰í•œ ì¼ ì—†ìœ¼ë©´ ì²œì²œíˆ.",
          "ì˜¤ëŠ˜ ì§‘ì¤‘ë ¥ ì¢‹ì•„. ì–´ë ¤ìš´ ì¼ í•´ì¹˜ì›Œ.",
          "íšŒì˜ì—ì„œ ì˜ê²¬ ë‚´ë´.",
          "ë™ë£Œí•œí…Œ ì˜í•´. ë„ì›€ë°›ì„ ì¼ ìƒê²¨.",
          "ì•¼ê·¼ í”¼í•´. íš¨ìœ¨ ì•ˆ ë‚˜ì™€.",
          "ìƒˆ í”„ë¡œì íŠ¸ ì‹œì‘í•˜ê¸° ì¢‹ì•„.",
          "ìƒì‚¬ ëˆˆì— ë“¤ ìˆ˜ ìˆì–´.",
          "ì‹¤ìˆ˜í•´ë„ ê´œì°®ì•„. ë§ŒíšŒ ê¸°íšŒ ì™€."
        ];
        
        const luckyItems = ["ë”°ëœ»í•œ ì°¨", "íŒŒë€ìƒ‰ íœ", "ë™ì „", "ì†ê±°ìš¸", "ì´ì–´í°", "ì‚¬íƒ•", "ì—´ì‡ ê³ ë¦¬", "ì†ìˆ˜ê±´", "ë¦½ë°¤", "ë¨¸ë¦¬ëˆ", "ìŠ¤í‹°ì»¤", "ê³ ì–‘ì´ êµ¿ì¦ˆ", "ë³´ë¼ìƒ‰ ë¬¼ê±´", "ë³„ ëª¨ì–‘ ì•…ì„¸ì„œë¦¬", "í–¥ê¸° ë‚˜ëŠ” ê²ƒ"];
        
        const luckyColors = ["ë³´ë¼ìƒ‰", "ë‚¨ìƒ‰", "í•˜ëŠ˜ìƒ‰", "ë¯¼íŠ¸ìƒ‰", "ë¶„í™ìƒ‰", "ì‚´êµ¬ìƒ‰", "ë…¸ë€ìƒ‰", "ì—°ë‘ìƒ‰", "íšŒìƒ‰", "ê²€ì •ìƒ‰", "í°ìƒ‰", "ê¸ˆìƒ‰"];
        
        const pickMessage = (arr, offset) => arr[(seed + offset) % arr.length];
        
        return {
          overall, love, money, health, work,
          message: pickMessage(overallMessages, 0),
          detail: {
            love: pickMessage(loveMessages, 11),
            money: pickMessage(moneyMessages, 23),
            health: pickMessage(healthMessages, 37),
            work: pickMessage(workMessages, 53)
          },
          luckyItem: pickMessage(luckyItems, 7),
          luckyColor: pickMessage(luckyColors, 13),
          element: userElement,
          sign: yearStem + yearBranch
        };
      };

      const fetchFortune = async (userInfo) => {
        setIsLoading(true);
        await new Promise(resolve => setTimeout(resolve, 1500));
        const fortune = generateFortune(userInfo);
        setTodayFortune(fortune);
        setIsLoading(false);
      };

      const handleOnboardingComplete = async (userInfo) => {
        setUserData(userInfo);
        saveUserData(userInfo);
        setScreen('main');
        await fetchFortune(userInfo);
      };

      const handleUpdateUserData = async (newData) => {
        setUserData(newData);
        saveUserData(newData);
        setIsEditing(false);
        await fetchFortune(newData);
      };

      // ì¹´ì¹´ì˜¤í†¡ ê³µìœ 
      const shareToKakao = () => {
        if (!window.Kakao || !window.Kakao.isInitialized()) {
          alert('ì¹´ì¹´ì˜¤í†¡ ê³µìœ  ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ë ¤ë©´ ì¹´ì¹´ì˜¤ ê°œë°œì ë“±ë¡ì´ í•„ìš”í•´ìš”!');
          return;
        }
        
        window.Kakao.Share.sendDefault({
          objectType: 'feed',
          content: {
            title: 'ğŸ± ë¬˜ìš´ì´ê°€ ë³¸ ì˜¤ëŠ˜ì˜ ìš´ì„¸',
            description: todayFortune?.message?.replace(/\n/g, ' ') || 'ì˜¤ëŠ˜ì˜ ìš´ì„¸ë¥¼ í™•ì¸í•´ë³´ì„¸ìš”!',
            imageUrl: 'https://your-domain.com/icon.svg',
            link: {
              mobileWebUrl: window.location.href,
              webUrl: window.location.href,
            },
          },
          buttons: [
            {
              title: 'ë‚´ ìš´ì„¸ ë³´ëŸ¬ê°€ê¸°',
              link: {
                mobileWebUrl: window.location.href,
                webUrl: window.location.href,
              },
            },
          ],
        });
      };

      // ì´ë¯¸ì§€ ì €ì¥
      const saveAsImage = async () => {
        if (!shareCardRef.current) return;
        
        try {
          const canvas = await html2canvas(shareCardRef.current, {
            backgroundColor: '#13102a',
            scale: 2,
          });
          
          const link = document.createElement('a');
          link.download = `meowun_${new Date().toISOString().split('T')[0]}.png`;
          link.href = canvas.toDataURL('image/png');
          link.click();
        } catch (e) {
          alert('ì´ë¯¸ì§€ ì €ì¥ì— ì‹¤íŒ¨í–ˆì–´ìš”. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”!');
        }
      };

      // ë³„ì  ì»´í¬ë„ŒíŠ¸
      const StarRating = ({ rating, max = 5, size = 'normal' }) => {
        const starSize = size === 'small' ? '14px' : '18px';
        return (
          <div style={{ display: 'flex', gap: '2px', alignItems: 'center' }}>
            {[...Array(max)].map((_, i) => {
              const starValue = i + 1;
              let fillPercentage = 0;
              if (rating >= starValue) fillPercentage = 100;
              else if (rating >= starValue - 0.5) fillPercentage = 50;
              
              return (
                <div key={i} style={{ position: 'relative', width: starSize, height: starSize }}>
                  <span style={{ fontSize: starSize, filter: 'grayscale(1) opacity(0.3)', position: 'absolute' }}>â­</span>
                  <div style={{ position: 'absolute', width: `${fillPercentage}%`, overflow: 'hidden' }}>
                    <span style={{ fontSize: starSize }}>â­</span>
                  </div>
                </div>
              );
            })}
            <span style={{ 
              marginLeft: '6px', 
              fontSize: size === 'small' ? '12px' : '14px', 
              color: '#a78bfa',
              fontWeight: '700'
            }}>
              {rating}
            </span>
          </div>
        );
      };

      // ìˆ«ì ì…ë ¥ ì»´í¬ë„ŒíŠ¸
      const NumberInput = ({ value, onChange, placeholder, maxLength, max }) => (
        <input
          type="tel"
          inputMode="numeric"
          pattern="[0-9]*"
          value={value || ''}
          onChange={(e) => {
            const val = e.target.value.replace(/[^0-9]/g, '');
            if (maxLength && val.length > maxLength) return;
            if (max && val.length > 0 && parseInt(val, 10) > max) return;
            onChange(val);
          }}
          placeholder={placeholder}
          style={{
            width: '100%',
            padding: '16px',
            fontSize: '18px',
            fontFamily: '"Gaegu", cursive',
            background: 'rgba(139, 92, 246, 0.1)',
            border: '2px solid rgba(139, 92, 246, 0.3)',
            borderRadius: '16px',
            color: '#f5f5f5',
            outline: 'none',
            textAlign: 'center',
            WebkitAppearance: 'none',
          }}
        />
      );

      // ìŠ¤í”Œë˜ì‹œ í™”ë©´
      const SplashScreen = () => (
        <div style={{
          height: '100%',
          display: 'flex',
          flexDirection: 'column',
          alignItems: 'center',
          justifyContent: 'center',
          background: 'linear-gradient(180deg, #13102a 0%, #1e1b4b 50%, #0f0f1a 100%)',
          position: 'relative',
          overflow: 'hidden',
          padding: '20px',
        }}>
          {/* ë³„ ë°°ê²½ */}
          <div style={{ position: 'absolute', inset: 0, overflow: 'hidden', pointerEvents: 'none' }}>
            {[...Array(40)].map((_, i) => (
              <div key={i} style={{
                position: 'absolute',
                width: Math.random() * 3 + 1 + 'px',
                height: Math.random() * 3 + 1 + 'px',
                background: i % 3 === 0 ? '#a78bfa' : '#fff',
                borderRadius: '50%',
                left: Math.random() * 100 + '%',
                top: Math.random() * 100 + '%',
                opacity: Math.random() * 0.7 + 0.3,
                animation: `twinkle ${Math.random() * 3 + 2}s ease-in-out infinite`,
              }} />
            ))}
          </div>

          <div style={{ animation: 'float 3s ease-in-out infinite', marginBottom: '24px' }}>
            <MeowunCat size={160} />
          </div>

          <div style={{
            fontSize: '52px',
            color: '#f5f5f5',
            textShadow: '0 0 30px rgba(167, 139, 250, 0.5)',
            letterSpacing: '6px',
            marginBottom: '8px',
            fontWeight: '700',
          }}>
            ë¬˜ìš´
          </div>
          <div style={{
            fontSize: '18px',
            color: '#a78bfa',
            letterSpacing: '8px',
            marginBottom: '16px',
            fontWeight: '400',
          }}>
            MEOWUN
          </div>

          <div style={{
            fontSize: '16px',
            color: '#94a3b8',
            textAlign: 'center',
            lineHeight: 1.8,
            marginBottom: '48px',
          }}>
            ê¹Œì¹ í•œ ìš°ì£¼ ê³ ì–‘ì´ê°€ ì „í•˜ëŠ”<br />ì˜¤ëŠ˜ì˜ ìš´ì„¸ âœ¨
          </div>

          <button
            onClick={() => setScreen('onboarding')}
            style={{
              fontSize: '20px',
              padding: '18px 56px',
              background: 'linear-gradient(135deg, #8b5cf6 0%, #6d28d9 100%)',
              color: '#fff',
              border: 'none',
              borderRadius: '50px',
              cursor: 'pointer',
              boxShadow: '0 8px 32px rgba(139, 92, 246, 0.4)',
              fontFamily: '"Gaegu", cursive',
              fontWeight: '700',
              position: 'relative',
              zIndex: 10,
              transition: 'all 0.3s',
            }}
          >
            ì‹œì‘í•˜ê¸° ğŸŒ™
          </button>
        </div>
      );

      // ì˜¨ë³´ë”© í™”ë©´
      const OnboardingScreen = () => {
        const [step, setStep] = useState(1);
        const [localData, setLocalData] = useState({ ...userData });

        const handleNext = () => {
          if (step < 3) setStep(step + 1);
          else handleOnboardingComplete(localData);
        };

        const canProceed = () => {
          if (step === 1) return localData.name?.length > 0;
          if (step === 2) return localData.birthYear && localData.birthMonth && localData.birthDay;
          return true;
        };

        return (
          <div style={{
            height: '100%',
            display: 'flex',
            flexDirection: 'column',
            background: 'linear-gradient(180deg, #13102a 0%, #1e1b4b 100%)',
            padding: '24px',
            paddingTop: 'max(24px, env(safe-area-inset-top))',
          }}>
            {/* ì§„í–‰ í‘œì‹œ */}
            <div style={{ display: 'flex', gap: '8px', marginBottom: '32px', justifyContent: 'center' }}>
              {[1, 2, 3].map(i => (
                <div key={i} style={{
                  width: i === step ? '32px' : '10px',
                  height: '10px',
                  borderRadius: '5px',
                  background: i <= step ? 'linear-gradient(90deg, #8b5cf6, #a78bfa)' : 'rgba(255,255,255,0.2)',
                  transition: 'all 0.3s',
                }} />
              ))}
            </div>

            {/* ê³ ì–‘ì´ ë§í’ì„  */}
            <div style={{ display: 'flex', alignItems: 'flex-start', gap: '12px', marginBottom: '32px' }}>
              <MeowunCat size={60} />
              <div style={{
                fontSize: '17px',
                color: '#f5f5f5',
                background: 'rgba(139, 92, 246, 0.15)',
                padding: '16px 20px',
                borderRadius: '4px 20px 20px 20px',
                lineHeight: 1.7,
                border: '1px solid rgba(139, 92, 246, 0.3)',
                whiteSpace: 'pre-line',
                flex: 1,
              }}>
                {step === 1 && "...ì™”ì–´? ì´ë¦„ì´ ë­ì•¼?\në³„ ë³¼ ë•Œ í•„ìš”í•˜ê±°ë“ ."}
                {step === 2 && "ìƒë…„ì›”ì¼ ì•Œë ¤ì¤˜.\nì‚¬ì£¼ ë³´ë ¤ë©´ í•„ìš”í•´."}
                {step === 3 && "íƒœì–´ë‚œ ì‹œê°„ë„ ì•Œì•„?\nëª¨ë¥´ë©´ ë¹„ì›Œë‘¬ë„ ë¼."}
              </div>
            </div>

            {/* ì…ë ¥ í¼ */}
            <div style={{ flex: 1 }}>
              {step === 1 && (
                <div>
                  <label style={{ fontSize: '15px', color: '#a78bfa', marginBottom: '12px', display: 'block' }}>ì´ë¦„</label>
                  <input
                    type="text"
                    value={localData.name}
                    onChange={(e) => setLocalData({ ...localData, name: e.target.value })}
                    placeholder="ì´ë¦„ì„ ì…ë ¥í•´ì¤˜"
                    style={{
                      width: '100%',
                      padding: '18px',
                      fontSize: '18px',
                      fontFamily: '"Gaegu", cursive',
                      background: 'rgba(139, 92, 246, 0.1)',
                      border: '2px solid rgba(139, 92, 246, 0.3)',
                      borderRadius: '16px',
                      color: '#f5f5f5',
                      outline: 'none',
                    }}
                  />
                </div>
              )}

              {step === 2 && (
                <div>
                  <label style={{ fontSize: '15px', color: '#a78bfa', marginBottom: '12px', display: 'block' }}>ìƒë…„ì›”ì¼</label>
                  <div style={{ display: 'flex', gap: '10px', marginBottom: '12px' }}>
                    <div style={{ flex: 2 }}>
                      <NumberInput
                        value={localData.birthYear}
                        onChange={(val) => setLocalData({ ...localData, birthYear: val })}
                        placeholder="1990"
                        maxLength={4}
                      />
                      <div style={{ fontSize: '12px', color: '#64748b', textAlign: 'center', marginTop: '6px' }}>ë…„</div>
                    </div>
                    <div style={{ flex: 1 }}>
                      <NumberInput
                        value={localData.birthMonth}
                        onChange={(val) => setLocalData({ ...localData, birthMonth: val })}
                        placeholder="01"
                        maxLength={2}
                        max={12}
                      />
                      <div style={{ fontSize: '12px', color: '#64748b', textAlign: 'center', marginTop: '6px' }}>ì›”</div>
                    </div>
                    <div style={{ flex: 1 }}>
                      <NumberInput
                        value={localData.birthDay}
                        onChange={(val) => setLocalData({ ...localData, birthDay: val })}
                        placeholder="01"
                        maxLength={2}
                        max={31}
                      />
                      <div style={{ fontSize: '12px', color: '#64748b', textAlign: 'center', marginTop: '6px' }}>ì¼</div>
                    </div>
                  </div>
                </div>
              )}

              {step === 3 && (
                <div>
                  <label style={{ fontSize: '15px', color: '#a78bfa', marginBottom: '12px', display: 'block' }}>íƒœì–´ë‚œ ì‹œê°„ (ì„ íƒ)</label>
                  <div style={{ display: 'flex', gap: '10px', alignItems: 'center', justifyContent: 'center' }}>
                    <div style={{ width: '100px' }}>
                      <NumberInput
                        value={localData.birthHour}
                        onChange={(val) => setLocalData({ ...localData, birthHour: val })}
                        placeholder="00"
                        maxLength={2}
                        max={23}
                      />
                    </div>
                    <span style={{ fontSize: '20px', color: '#64748b' }}>ì‹œ</span>
                  </div>
                  <p style={{ fontSize: '13px', color: '#64748b', marginTop: '16px', textAlign: 'center' }}>
                    * ëª¨ë¥´ë©´ ë¹„ì›Œë‘¬ë„ ë¼
                  </p>
                </div>
              )}
            </div>

            <button
              onClick={() => {
                if (canProceed()) {
                  handleNext();
                }
              }}
              style={{
                fontSize: '18px',
                padding: '18px',
                background: canProceed() ? 'linear-gradient(135deg, #8b5cf6 0%, #6d28d9 100%)' : 'rgba(100,100,100,0.3)',
                color: '#fff',
                border: 'none',
                borderRadius: '16px',
                cursor: canProceed() ? 'pointer' : 'not-allowed',
                fontFamily: '"Gaegu", cursive',
                fontWeight: '700',
                marginBottom: 'max(16px, env(safe-area-inset-bottom))',
                position: 'relative',
                zIndex: 10,
                opacity: canProceed() ? 1 : 0.5,
                WebkitTapHighlightColor: 'transparent',
              }}
            >
              {step === 3 ? 'ìš´ì„¸ ë³´ê¸° âœ¨' : 'ë‹¤ìŒ'}
            </button>
          </div>
        );
      };

      // ë©”ì¸ í™”ë©´
      const MainScreen = () => (
        <div style={{
          height: '100%',
          display: 'flex',
          flexDirection: 'column',
          background: 'linear-gradient(180deg, #13102a 0%, #1e1b4b 100%)',
        }}>
          {/* í—¤ë” */}
          <div style={{
            display: 'flex',
            justifyContent: 'space-between',
            alignItems: 'center',
            padding: '16px 20px',
            paddingTop: 'max(16px, env(safe-area-inset-top))',
          }}>
            <div style={{ fontSize: '22px', color: '#f5f5f5', fontWeight: '700' }}>
              ë¬˜ìš´ <span style={{ fontSize: '18px' }}>ğŸŒ™</span>
            </div>
            <button
              onClick={() => setShowMyPage(true)}
              style={{
                background: 'rgba(139, 92, 246, 0.2)',
                border: '1px solid rgba(139, 92, 246, 0.3)',
                borderRadius: '50%',
                width: '40px',
                height: '40px',
                fontSize: '18px',
                cursor: 'pointer',
                display: 'flex',
                alignItems: 'center',
                justifyContent: 'center',
              }}
            >
              ğŸ‘¤
            </button>
          </div>

          {isLoading ? (
            <div style={{
              flex: 1,
              display: 'flex',
              flexDirection: 'column',
              alignItems: 'center',
              justifyContent: 'center',
              padding: '20px',
            }}>
              <div style={{ animation: 'float 2s ease-in-out infinite' }}>
                <MeowunCat size={140} />
              </div>
              <div style={{
                fontSize: '20px',
                color: '#f5f5f5',
                marginTop: '24px',
                textAlign: 'center',
                lineHeight: 1.7,
              }}>
                ìš°ì£¼ë¥¼ ì½ê³  ìˆì–´...<br />ì ê¹ë§Œ ê¸°ë‹¤ë ¤.
              </div>
              <div style={{ fontSize: '24px', color: '#a78bfa', marginTop: '16px', animation: 'pulse 1.5s infinite' }}>
                ğŸŒŸ âœ¨ ğŸŒ™
              </div>
            </div>
          ) : todayFortune ? (
            <div style={{ flex: 1, overflowY: 'auto', padding: '0 20px 20px' }}>
              {/* ë‚ ì§œ & ì¸ì‚¬ */}
              <div style={{ fontSize: '14px', color: '#a78bfa', marginBottom: '6px' }}>
                {new Date().toLocaleDateString('ko-KR', { month: 'long', day: 'numeric', weekday: 'long' })}
              </div>
              <div style={{ fontSize: '22px', color: '#f5f5f5', marginBottom: '20px', fontWeight: '700' }}>
                {userData.name}, ì˜¤ëŠ˜ì˜ ìš´ì„¸ì•¼ âœ¨
              </div>

              {/* ë©”ì¸ ìš´ì„¸ ì¹´ë“œ */}
              <div style={{
                background: 'linear-gradient(135deg, rgba(139, 92, 246, 0.2) 0%, rgba(109, 40, 217, 0.2) 100%)',
                border: '1px solid rgba(139, 92, 246, 0.3)',
                borderRadius: '24px',
                padding: '24px',
                marginBottom: '16px',
                position: 'relative',
              }}>
                <div style={{ position: 'absolute', top: '-30px', right: '16px' }}>
                  <MeowunCat size={65} />
                </div>

                <div style={{ fontSize: '13px', color: '#a78bfa', marginBottom: '8px', fontWeight: '700' }}>ì˜¤ëŠ˜ì˜ ì´ìš´</div>
                <StarRating rating={todayFortune.overall} />
                <div style={{
                  fontSize: '18px',
                  color: '#f5f5f5',
                  marginTop: '16px',
                  lineHeight: 1.8,
                  whiteSpace: 'pre-line',
                }}>
                  {todayFortune.message}
                </div>
              </div>

              {/* ì„¸ë¶€ ìš´ì„¸ */}
              <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '12px', marginBottom: '16px' }}>
                {[
                  { key: 'love', emoji: 'ğŸ’•', label: 'ì—°ì• ìš´', rating: todayFortune.love },
                  { key: 'money', emoji: 'ğŸ’°', label: 'ê¸ˆì „ìš´', rating: todayFortune.money },
                  { key: 'health', emoji: 'ğŸŒ¿', label: 'ê±´ê°•ìš´', rating: todayFortune.health },
                  { key: 'work', emoji: 'ğŸ’¼', label: 'ì§ì¥ìš´', rating: todayFortune.work },
                ].map(item => (
                  <div key={item.key} style={{
                    background: 'rgba(255,255,255,0.03)',
                    border: '1px solid rgba(139, 92, 246, 0.2)',
                    borderRadius: '16px',
                    padding: '16px',
                  }}>
                    <div style={{ display: 'flex', alignItems: 'center', gap: '6px', marginBottom: '8px' }}>
                      <span style={{ fontSize: '18px' }}>{item.emoji}</span>
                      <span style={{ fontSize: '13px', color: '#a78bfa', fontWeight: '700' }}>{item.label}</span>
                    </div>
                    <StarRating rating={item.rating} size="small" />
                    <div style={{ fontSize: '13px', color: '#e2e8f0', marginTop: '10px', lineHeight: 1.5 }}>
                      {todayFortune.detail[item.key]}
                    </div>
                  </div>
                ))}
              </div>

              {/* í–‰ìš´ ì•„ì´í…œ */}
              <div style={{
                background: 'linear-gradient(135deg, rgba(250, 204, 21, 0.1) 0%, rgba(234, 179, 8, 0.1) 100%)',
                border: '1px solid rgba(250, 204, 21, 0.3)',
                borderRadius: '16px',
                padding: '16px',
                marginBottom: '16px',
              }}>
                <div style={{ fontSize: '14px', color: '#fde047', marginBottom: '12px', fontWeight: '700' }}>
                  âœ¨ ì˜¤ëŠ˜ì˜ í–‰ìš´
                </div>
                <div style={{ display: 'flex', gap: '12px' }}>
                  <div style={{
                    flex: 1,
                    background: 'rgba(0,0,0,0.2)',
                    borderRadius: '12px',
                    padding: '12px',
                    textAlign: 'center',
                  }}>
                    <div style={{ fontSize: '22px', marginBottom: '4px' }}>ğŸ€</div>
                    <div style={{ fontSize: '11px', color: '#a78bfa', marginBottom: '4px' }}>í–‰ìš´ ì•„ì´í…œ</div>
                    <div style={{ fontSize: '14px', color: '#f5f5f5', fontWeight: '700' }}>{todayFortune.luckyItem}</div>
                  </div>
                  <div style={{
                    flex: 1,
                    background: 'rgba(0,0,0,0.2)',
                    borderRadius: '12px',
                    padding: '12px',
                    textAlign: 'center',
                  }}>
                    <div style={{ fontSize: '22px', marginBottom: '4px' }}>ğŸ¨</div>
                    <div style={{ fontSize: '11px', color: '#a78bfa', marginBottom: '4px' }}>í–‰ìš´ ìƒ‰ìƒ</div>
                    <div style={{ fontSize: '14px', color: '#f5f5f5', fontWeight: '700' }}>{todayFortune.luckyColor}</div>
                  </div>
                </div>
              </div>

              {/* ê³µìœ  ë²„íŠ¼ */}
              <button
                onClick={() => setShowShareCard(true)}
                style={{
                  width: '100%',
                  fontSize: '17px',
                  padding: '16px',
                  background: 'linear-gradient(135deg, #8b5cf6 0%, #6d28d9 100%)',
                  color: '#fff',
                  border: 'none',
                  borderRadius: '16px',
                  cursor: 'pointer',
                  fontFamily: '"Gaegu", cursive',
                  fontWeight: '700',
                  marginBottom: '16px',
                }}
              >
                ì¹œêµ¬ì—ê²Œ ê³µìœ í•˜ê¸° ğŸ“¤
              </button>
            </div>
          ) : null}

          {/* ê´‘ê³  ë°°ë„ˆ - ì¿ íŒ¡íŒŒíŠ¸ë„ˆìŠ¤ */}
          <div style={{
            padding: '8px 16px',
            paddingBottom: 'max(8px, env(safe-area-inset-bottom))',
            background: 'rgba(0,0,0,0.3)',
            borderTop: '1px solid rgba(139, 92, 246, 0.2)',
          }}>
            <div 
              id="coupang-banner"
              style={{
                borderRadius: '8px',
                overflow: 'hidden',
                height: '100px',
              }}
            />
            <div style={{ fontSize: '9px', color: '#64748b', textAlign: 'center', marginTop: '4px' }}>
              ì´ ë°°ë„ˆëŠ” ì¿ íŒ¡ íŒŒíŠ¸ë„ˆìŠ¤ í™œë™ì˜ ì¼í™˜ìœ¼ë¡œ, ì´ì— ë”°ë¥¸ ì¼ì •ì•¡ì˜ ìˆ˜ìˆ˜ë£Œë¥¼ ì œê³µ ë°›ìŠµë‹ˆë‹¤
            </div>
          </div>
        </div>
      );

      // ê³µìœ  ì¹´ë“œ ëª¨ë‹¬
      const ShareCardModal = () => (
        <div style={{
          position: 'fixed',
          inset: 0,
          background: 'rgba(0,0,0,0.85)',
          display: 'flex',
          flexDirection: 'column',
          alignItems: 'center',
          justifyContent: 'center',
          padding: '20px',
          zIndex: 100,
        }}>
          {/* ê³µìœ  ì¹´ë“œ */}
          <div 
            ref={shareCardRef}
            style={{
              width: '100%',
              maxWidth: '300px',
              background: 'linear-gradient(180deg, #1e1b4b 0%, #13102a 100%)',
              borderRadius: '24px',
              padding: '28px 24px',
              border: '2px solid rgba(139, 92, 246, 0.4)',
              marginBottom: '20px',
            }}
          >
            <div style={{ position: 'absolute', top: '12px', left: '12px', fontSize: '16px' }}>âœ¨</div>
            <div style={{ position: 'absolute', top: '12px', right: '12px', fontSize: '16px' }}>ğŸŒ™</div>

            <div style={{ textAlign: 'center', marginBottom: '16px' }}>
              <div style={{ fontSize: '28px', color: '#f5f5f5', fontWeight: '700' }}>ë¬˜ìš´</div>
              <div style={{ fontSize: '11px', color: '#a78bfa', letterSpacing: '4px' }}>MEOWUN</div>
            </div>

            <div style={{ display: 'flex', justifyContent: 'center', marginBottom: '16px' }}>
              <MeowunCat size={80} />
            </div>

            <div style={{
              fontSize: '17px',
              color: '#f5f5f5',
              textAlign: 'center',
              lineHeight: 1.8,
              marginBottom: '16px',
              whiteSpace: 'pre-line',
            }}>
              "{todayFortune?.message}"
            </div>

            <div style={{ display: 'flex', justifyContent: 'center', marginBottom: '12px' }}>
              <StarRating rating={todayFortune?.overall || 0} />
            </div>

            <div style={{ fontSize: '12px', color: '#64748b', textAlign: 'center' }}>
              {new Date().toLocaleDateString('ko-KR')} | {userData.name}
            </div>
          </div>

          {/* ë²„íŠ¼ë“¤ */}
          <div style={{ display: 'flex', gap: '12px', width: '100%', maxWidth: '300px' }}>
            <button
              onClick={saveAsImage}
              style={{
                flex: 1,
                fontSize: '15px',
                padding: '14px',
                background: 'rgba(255,255,255,0.1)',
                color: '#fff',
                border: '1px solid rgba(255,255,255,0.2)',
                borderRadius: '12px',
                cursor: 'pointer',
                fontFamily: '"Gaegu", cursive',
                fontWeight: '700',
              }}
            >
              ğŸ“¥ ì €ì¥
            </button>
            <button
              onClick={shareToKakao}
              style={{
                flex: 1,
                fontSize: '15px',
                padding: '14px',
                background: '#FEE500',
                color: '#000',
                border: 'none',
                borderRadius: '12px',
                cursor: 'pointer',
                fontFamily: '"Gaegu", cursive',
                fontWeight: '700',
              }}
            >
              ğŸ’¬ ì¹´ì¹´ì˜¤í†¡
            </button>
          </div>

          <button
            onClick={() => setShowShareCard(false)}
            style={{
              marginTop: '20px',
              fontSize: '15px',
              color: '#64748b',
              background: 'none',
              border: 'none',
              cursor: 'pointer',
              fontFamily: '"Gaegu", cursive',
            }}
          >
            ë‹«ê¸°
          </button>
        </div>
      );

      // ë§ˆì´í˜ì´ì§€ ëª¨ë‹¬
      const MyPageModal = () => {
        const [editData, setEditData] = useState({ ...userData });

        return (
          <div style={{
            position: 'fixed',
            inset: 0,
            background: 'linear-gradient(180deg, #13102a 0%, #1e1b4b 100%)',
            display: 'flex',
            flexDirection: 'column',
            zIndex: 100,
          }}>
            <div style={{
              display: 'flex',
              justifyContent: 'space-between',
              alignItems: 'center',
              padding: '16px 20px',
              paddingTop: 'max(16px, env(safe-area-inset-top))',
              borderBottom: '1px solid rgba(139, 92, 246, 0.2)',
            }}>
              <div style={{ fontSize: '22px', color: '#f5f5f5', fontWeight: '700' }}>ë§ˆì´í˜ì´ì§€</div>
              <button
                onClick={() => { setShowMyPage(false); setIsEditing(false); }}
                style={{
                  fontSize: '15px',
                  color: '#a78bfa',
                  background: 'none',
                  border: 'none',
                  cursor: 'pointer',
                  fontFamily: '"Gaegu", cursive',
                }}
              >
                ë‹«ê¸°
              </button>
            </div>

            <div style={{ flex: 1, padding: '24px 20px', overflowY: 'auto' }}>
              <div style={{
                background: 'rgba(139, 92, 246, 0.1)',
                borderRadius: '20px',
                padding: '24px',
                marginBottom: '24px',
                textAlign: 'center',
              }}>
                <MeowunCat size={80} />
                <div style={{ fontSize: '22px', color: '#f5f5f5', marginTop: '12px', fontWeight: '700' }}>
                  {userData.name}
                </div>
              </div>

              {isEditing ? (
                <div style={{
                  background: 'rgba(255,255,255,0.03)',
                  borderRadius: '16px',
                  padding: '20px',
                }}>
                  <div style={{ marginBottom: '16px' }}>
                    <label style={{ fontSize: '14px', color: '#a78bfa', marginBottom: '8px', display: 'block' }}>ì´ë¦„</label>
                    <input
                      type="text"
                      value={editData.name}
                      onChange={(e) => setEditData({ ...editData, name: e.target.value })}
                      style={{
                        width: '100%',
                        padding: '14px',
                        fontSize: '16px',
                        fontFamily: '"Gaegu", cursive',
                        background: 'rgba(139, 92, 246, 0.1)',
                        border: '1px solid rgba(139, 92, 246, 0.3)',
                        borderRadius: '12px',
                        color: '#f5f5f5',
                        outline: 'none',
                      }}
                    />
                  </div>

                  <div style={{ marginBottom: '16px' }}>
                    <label style={{ fontSize: '14px', color: '#a78bfa', marginBottom: '8px', display: 'block' }}>ìƒë…„ì›”ì¼</label>
                    <div style={{ display: 'flex', gap: '8px' }}>
                      <NumberInput
                        value={editData.birthYear}
                        onChange={(val) => setEditData({ ...editData, birthYear: val })}
                        placeholder="ë…„"
                        maxLength={4}
                      />
                      <NumberInput
                        value={editData.birthMonth}
                        onChange={(val) => setEditData({ ...editData, birthMonth: val })}
                        placeholder="ì›”"
                        maxLength={2}
                        max={12}
                      />
                      <NumberInput
                        value={editData.birthDay}
                        onChange={(val) => setEditData({ ...editData, birthDay: val })}
                        placeholder="ì¼"
                        maxLength={2}
                        max={31}
                      />
                    </div>
                  </div>

                  <div style={{ marginBottom: '20px' }}>
                    <label style={{ fontSize: '14px', color: '#a78bfa', marginBottom: '8px', display: 'block' }}>íƒœì–´ë‚œ ì‹œê°„</label>
                    <div style={{ display: 'flex', gap: '8px', alignItems: 'center' }}>
                      <div style={{ width: '80px' }}>
                        <NumberInput
                          value={editData.birthHour}
                          onChange={(val) => setEditData({ ...editData, birthHour: val })}
                          placeholder="ì‹œ"
                          maxLength={2}
                          max={23}
                        />
                      </div>
                      <span style={{ color: '#64748b' }}>ì‹œ</span>
                    </div>
                  </div>

                  <div style={{ display: 'flex', gap: '12px' }}>
                    <button
                      onClick={() => setIsEditing(false)}
                      style={{
                        flex: 1,
                        padding: '14px',
                        fontSize: '15px',
                        background: 'rgba(255,255,255,0.1)',
                        color: '#fff',
                        border: 'none',
                        borderRadius: '12px',
                        cursor: 'pointer',
                        fontFamily: '"Gaegu", cursive',
                      }}
                    >
                      ì·¨ì†Œ
                    </button>
                    <button
                      onClick={() => handleUpdateUserData(editData)}
                      style={{
                        flex: 1,
                        padding: '14px',
                        fontSize: '15px',
                        background: 'linear-gradient(135deg, #8b5cf6 0%, #6d28d9 100%)',
                        color: '#fff',
                        border: 'none',
                        borderRadius: '12px',
                        cursor: 'pointer',
                        fontFamily: '"Gaegu", cursive',
                        fontWeight: '700',
                      }}
                    >
                      ì €ì¥
                    </button>
                  </div>
                </div>
              ) : (
                <div style={{
                  background: 'rgba(255,255,255,0.03)',
                  borderRadius: '16px',
                  overflow: 'hidden',
                }}>
                  {[
                    { label: 'ì´ë¦„', value: userData.name },
                    { label: 'ìƒë…„ì›”ì¼', value: `${userData.birthYear}ë…„ ${userData.birthMonth}ì›” ${userData.birthDay}ì¼` },
                    { label: 'íƒœì–´ë‚œ ì‹œê°„', value: userData.birthHour ? `${userData.birthHour}ì‹œ` : 'ë¯¸ì…ë ¥' },
                  ].map((item, i) => (
                    <div key={i} style={{
                      display: 'flex',
                      justifyContent: 'space-between',
                      alignItems: 'center',
                      padding: '16px 20px',
                      borderBottom: i < 2 ? '1px solid rgba(255,255,255,0.05)' : 'none',
                    }}>
                      <span style={{ fontSize: '15px', color: '#a78bfa' }}>{item.label}</span>
                      <span style={{ fontSize: '15px', color: '#f5f5f5' }}>{item.value}</span>
                    </div>
                  ))}
                </div>
              )}

              {!isEditing && (
                <button
                  onClick={() => setIsEditing(true)}
                  style={{
                    width: '100%',
                    marginTop: '16px',
                    padding: '14px',
                    fontSize: '15px',
                    background: 'rgba(139, 92, 246, 0.15)',
                    color: '#a78bfa',
                    border: '1px dashed rgba(139, 92, 246, 0.4)',
                    borderRadius: '12px',
                    cursor: 'pointer',
                    fontFamily: '"Gaegu", cursive',
                  }}
                >
                  ì •ë³´ ìˆ˜ì •í•˜ê¸° âœï¸
                </button>
              )}
            </div>
          </div>
        );
      };

      return (
        <div style={{ width: '100%', height: '100%', position: 'relative' }}>
          {screen === 'splash' && <SplashScreen />}
          {screen === 'onboarding' && <OnboardingScreen />}
          {screen === 'main' && <MainScreen />}
          {showShareCard && <ShareCardModal />}
          {showMyPage && <MyPageModal />}
        </div>
      );
    };

    ReactDOM.createRoot(document.getElementById('root')).render(<MeowunApp />);
  </script>

  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('sw.js').catch(() => {});
      });
    }
  </script>
  
  <!-- ì¿ íŒ¡íŒŒíŠ¸ë„ˆìŠ¤ ë°°ë„ˆ ìŠ¤í¬ë¦½íŠ¸ -->
  <script src="https://ads-partners.coupang.com/g.js" async></script>
  <script>
    // ì¿ íŒ¡ ë°°ë„ˆ ë¡œë“œ ì²´í¬ ë° ì´ˆê¸°í™”
    function loadCoupangBanner() {
      var banner = document.getElementById('coupang-banner');
      if (banner && window.PartnersCoupang && !banner.hasChildNodes()) {
        new PartnersCoupang.G({
          id: 800931,
          trackingCode: "AF6702889",
          subId: null,
          template: "carousel",
          width: "100%",
          height: "100"
        });
      } else if (banner && !window.PartnersCoupang) {
        setTimeout(loadCoupangBanner, 500);
      }
    }
    
    // í˜ì´ì§€ ë¡œë“œ í›„ ë°°ë„ˆ ì´ˆê¸°í™” ì‹œë„
    window.addEventListener('load', function() {
      setTimeout(loadCoupangBanner, 1000);
    });
    
    // MutationObserverë¡œ ë°°ë„ˆ ì˜ì—­ ê°ì§€
    var observer = new MutationObserver(function(mutations) {
      var banner = document.getElementById('coupang-banner');
      if (banner && !banner.hasChildNodes()) {
        loadCoupangBanner();
      }
    });
    observer.observe(document.body, { childList: true, subtree: true });
  </script>
</body>
</html>
