<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="ë¬˜ìš´">
  <meta name="theme-color" content="#1a1a2e">
  <meta name="description" content="ê¹Œì¹ í•œ ìš°ì£¼ ê³ ì–‘ì´ê°€ ì „í•˜ëŠ” ì˜¤ëŠ˜ì˜ ìš´ì„¸">
  
  <title>ë¬˜ìš´ MEOWUN</title>
  
  <!-- PWA Manifest -->
  <link rel="manifest" href="manifest.json">
  
  <!-- iOS ì•„ì´ì½˜ -->
  <link rel="apple-touch-icon" href="icon.svg">
  
  <!-- íŒŒë¹„ì½˜ -->
  <link rel="icon" type="image/svg+xml" href="icon.svg">
  
  <link href="https://fonts.googleapis.com/css2?family=Gaegu:wght@300;400;700&display=swap" rel="stylesheet">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    
    html, body {
      height: 100%;
      overflow: hidden;
    }
    
    body {
      background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f0f23 100%);
      /* iOS ì•ˆì „ ì˜ì—­ ëŒ€ì‘ */
      padding: env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left);
    }
    
    #root {
      height: 100%;
    }
    
    @keyframes twinkle {
      0%, 100% { opacity: 0.3; }
      50% { opacity: 1; }
    }
    @keyframes float {
      0%, 100% { transform: translateY(0px); }
      50% { transform: translateY(-10px); }
    }
    
    /* ìŠ¤í¬ë¡¤ë°” ìˆ¨ê¸°ê¸° */
    ::-webkit-scrollbar {
      display: none;
    }
    
    /* í„°ì¹˜ í•˜ì´ë¼ì´íŠ¸ ì œê±° */
    * {
      -webkit-tap-highlight-color: transparent;
    }
  </style>
</head>
<body>
  <div id="root"></div>
  <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script type="text/babel">
    const { useState } = React;

    // ë§í†  ì“´ ê²€ì€ ê³ ì–‘ì´ ìºë¦­í„° ì»´í¬ë„ŒíŠ¸ - ë™ê¸€ë™ê¸€ í­ì‹ í•œ ìŠ¤íƒ€ì¼
    const MeowunCat = ({ size = 100, style = {} }) => (
      <svg width={size} height={size} viewBox="0 0 100 100" style={style}>
        <defs>
          {/* ë§í†  ê·¸ë¼ë°ì´ì…˜ */}
          <linearGradient id="capeGradient" x1="0%" y1="0%" x2="0%" y2="100%">
            <stop offset="0%" stopColor="#5a1a8a" />
            <stop offset="100%" stopColor="#2a0a4a" />
          </linearGradient>
          {/* ê¸ˆìƒ‰ ëˆˆ ê·¸ë¼ë°ì´ì…˜ */}
          <radialGradient id="eyeGold" cx="50%" cy="30%" r="60%">
            <stop offset="0%" stopColor="#ffe066" />
            <stop offset="50%" stopColor="#ffc700" />
            <stop offset="100%" stopColor="#b8960b" />
          </radialGradient>
        </defs>
        
        {/* ë§í†  - ë’¤ìª½ */}
        <ellipse cx="50" cy="75" rx="38" ry="22" fill="url(#capeGradient)" />
        <path
          d="M12 65 Q8 75 15 90 Q30 98 50 98 Q70 98 85 90 Q92 75 88 65 Q75 55 50 58 Q25 55 12 65"
          fill="url(#capeGradient)"
        />
        {/* ë§í†  ë³„ ì¥ì‹ */}
        <circle cx="22" cy="78" r="1.5" fill="#ffd700" opacity="0.9" />
        <circle cx="78" cy="76" r="1.2" fill="#ffd700" opacity="0.8" />
        <circle cx="30" cy="88" r="1" fill="#ffd700" opacity="0.7" />
        <circle cx="70" cy="86" r="1.3" fill="#ffd700" opacity="0.8" />
        <circle cx="50" cy="92" r="1" fill="#ffd700" opacity="0.6" />
        <circle cx="40" cy="82" r="0.8" fill="#ffd700" opacity="0.5" />
        <circle cx="62" cy="80" r="1" fill="#ffd700" opacity="0.7" />
        
        {/* ì–¼êµ´ - ë™ê¸€ë™ê¸€ í­ì‹ í•˜ê²Œ */}
        <ellipse cx="50" cy="42" rx="32" ry="30" fill="#2a2a2a" />
        {/* ì–¼êµ´ í•˜ì´ë¼ì´íŠ¸ (í­ì‹ í•œ ëŠë‚Œ) */}
        <ellipse cx="50" cy="38" rx="28" ry="24" fill="#1f1f1f" />
        
        {/* ì™¼ìª½ ê·€ - ë™ê¸€í•˜ê²Œ */}
        <ellipse cx="24" cy="18" rx="10" ry="14" fill="#2a2a2a" />
        <ellipse cx="24" cy="18" rx="7" ry="10" fill="#1f1f1f" />
        {/* ê·€ ì•ˆìª½ */}
        <ellipse cx="24" cy="20" rx="4" ry="6" fill="#3d3d3d" opacity="0.5" />
        
        {/* ì˜¤ë¥¸ìª½ ê·€ - ë™ê¸€í•˜ê²Œ */}
        <ellipse cx="76" cy="18" rx="10" ry="14" fill="#2a2a2a" />
        <ellipse cx="76" cy="18" rx="7" ry="10" fill="#1f1f1f" />
        {/* ê·€ ì•ˆìª½ */}
        <ellipse cx="76" cy="20" rx="4" ry="6" fill="#3d3d3d" opacity="0.5" />
        
        {/* ì™¼ìª½ ëˆˆ - í¬ê³  ë™ê·¸ë€ ê¸ˆìƒ‰ ëˆˆ */}
        <ellipse cx="35" cy="40" rx="12" ry="13" fill="url(#eyeGold)" stroke="#8b7500" strokeWidth="1.5" />
        {/* ëˆˆë™ì */}
        <ellipse cx="35" cy="42" rx="5" ry="7" fill="#1a1a1a" />
        {/* í•˜ì´ë¼ì´íŠ¸ */}
        <ellipse cx="32" cy="37" rx="3" ry="4" fill="#fff" opacity="0.9" />
        <circle cx="38" cy="45" r="1.5" fill="#fff" opacity="0.5" />
        
        {/* ì˜¤ë¥¸ìª½ ëˆˆ - í¬ê³  ë™ê·¸ë€ ê¸ˆìƒ‰ ëˆˆ */}
        <ellipse cx="65" cy="40" rx="12" ry="13" fill="url(#eyeGold)" stroke="#8b7500" strokeWidth="1.5" />
        {/* ëˆˆë™ì */}
        <ellipse cx="65" cy="42" rx="5" ry="7" fill="#1a1a1a" />
        {/* í•˜ì´ë¼ì´íŠ¸ */}
        <ellipse cx="62" cy="37" rx="3" ry="4" fill="#fff" opacity="0.9" />
        <circle cx="68" cy="45" r="1.5" fill="#fff" opacity="0.5" />
        
        {/* ì½” - ì‘ì€ ì—­ì‚¼ê°í˜• */}
        <path
          d="M50 52 L47 56 L53 56 Z"
          fill="#3d3d3d"
        />
        
        {/* ì… */}
        <path
          d="M50 56 L50 59"
          fill="none"
          stroke="#3d3d3d"
          strokeWidth="1.5"
          strokeLinecap="round"
        />
        <path
          d="M44 61 Q47 58 50 59 Q53 58 56 61"
          fill="none"
          stroke="#3d3d3d"
          strokeWidth="1.5"
          strokeLinecap="round"
        />
        
        {/* ìˆ˜ì—¼ - í•˜ì–€ìƒ‰ìœ¼ë¡œ */}
        <line x1="8" y1="48" x2="28" y2="52" stroke="#e0e0e0" strokeWidth="1.2" strokeLinecap="round" />
        <line x1="6" y1="54" x2="27" y2="54" stroke="#e0e0e0" strokeWidth="1.2" strokeLinecap="round" />
        <line x1="8" y1="60" x2="28" y2="56" stroke="#e0e0e0" strokeWidth="1.2" strokeLinecap="round" />
        <line x1="92" y1="48" x2="72" y2="52" stroke="#e0e0e0" strokeWidth="1.2" strokeLinecap="round" />
        <line x1="94" y1="54" x2="73" y2="54" stroke="#e0e0e0" strokeWidth="1.2" strokeLinecap="round" />
        <line x1="92" y1="60" x2="72" y2="56" stroke="#e0e0e0" strokeWidth="1.2" strokeLinecap="round" />
        
        {/* ë§í†  ë¸Œë¡œì¹˜ (ë³„) */}
        <polygon
          points="50,62 52,67 58,67 53,71 55,77 50,73 45,77 47,71 42,67 48,67"
          fill="#ffd700"
          stroke="#b8860b"
          strokeWidth="0.8"
        />
        {/* ë¸Œë¡œì¹˜ í•˜ì´ë¼ì´íŠ¸ */}
        <circle cx="48" cy="68" r="1" fill="#fff" opacity="0.6" />
      </svg>
    );

    const MeowunApp = () => {
      // localStorageì—ì„œ ì €ì¥ëœ ì‚¬ìš©ì ì •ë³´ ë¶ˆëŸ¬ì˜¤ê¸°
      const getSavedUserData = () => {
        try {
          const saved = localStorage.getItem('meowun_user');
          if (saved) {
            return JSON.parse(saved);
          }
        } catch (e) {
          console.error('ì €ì¥ëœ ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤íŒ¨:', e);
        }
        return null;
      };

      const savedUser = getSavedUserData();
      
      const [screen, setScreen] = useState(savedUser ? 'main' : 'splash');
      const [userData, setUserData] = useState(savedUser || {
        name: '',
        birthDate: '',
        birthTime: '',
      });
      const [showShareCard, setShowShareCard] = useState(false);
      const [showMyPage, setShowMyPage] = useState(false);
      const [todayFortune, setTodayFortune] = useState(null);
      const [isLoading, setIsLoading] = useState(savedUser ? true : false);

      // ì €ì¥ëœ ì‚¬ìš©ìê°€ ìˆìœ¼ë©´ ë°”ë¡œ ìš´ì„¸ ë¶ˆëŸ¬ì˜¤ê¸°
      React.useEffect(() => {
        if (savedUser && !todayFortune) {
          fetchFortune(savedUser);
        }
      }, []);

      // ì‚¬ìš©ì ì •ë³´ ì €ì¥
      const saveUserData = (data) => {
        try {
          localStorage.setItem('meowun_user', JSON.stringify(data));
        } catch (e) {
          console.error('ë°ì´í„° ì €ì¥ ì‹¤íŒ¨:', e);
        }
      };

      // Claude APIë¡œ ìš´ì„¸ ê°€ì ¸ì˜¤ê¸°
      const fetchFortune = async (userInfo) => {
        setIsLoading(true);
        
        const today = new Date().toLocaleDateString('ko-KR', { 
          year: 'numeric', 
          month: 'long', 
          day: 'numeric', 
          weekday: 'long' 
        });

        const prompt = `ë„ˆëŠ” "ë¬˜ìš´ì´"ë¼ëŠ” ê¹Œì¹ í•˜ì§€ë§Œ ë”°ëœ»í•œ ìš°ì£¼ ê³ ì–‘ì´ ì ì„±ìˆ ì‚¬ì•¼.
ì‚¬ìš©ìì˜ ì‚¬ì£¼ëª…ë¦¬ì™€ ì„œì–‘ ì ì„±ìˆ ì„ ê¸°ë°˜ìœ¼ë¡œ ì˜¤ëŠ˜ì˜ ìš´ì„¸ë¥¼ ë´ì¤˜.

ì‚¬ìš©ì ì •ë³´:
- ì´ë¦„: ${userInfo.name}
- ìƒë…„ì›”ì¼: ${userInfo.birthDate}
- íƒœì–´ë‚œ ì‹œê°„: ${userInfo.birthTime || 'ëª¨ë¦„'}
- ì˜¤ëŠ˜ ë‚ ì§œ: ${today}

ë‹¤ìŒ JSON í˜•ì‹ìœ¼ë¡œë§Œ ì‘ë‹µí•´ì¤˜ (ë‹¤ë¥¸ í…ìŠ¤íŠ¸ ì—†ì´ JSONë§Œ):
{
  "overall": (0.5~5 ì‚¬ì´ì˜ ìˆ«ì, 0.5 ë‹¨ìœ„, ì˜¤ëŠ˜ì˜ ì´ìš´ ë³„ì ),
  "love": (0.5~5 ì‚¬ì´ì˜ ìˆ«ì, 0.5 ë‹¨ìœ„, ì—°ì• ìš´ ë³„ì ),
  "money": (0.5~5 ì‚¬ì´ì˜ ìˆ«ì, 0.5 ë‹¨ìœ„, ê¸ˆì „ìš´ ë³„ì ),
  "health": (0.5~5 ì‚¬ì´ì˜ ìˆ«ì, 0.5 ë‹¨ìœ„, ê±´ê°•ìš´ ë³„ì ),
  "work": (0.5~5 ì‚¬ì´ì˜ ìˆ«ì, 0.5 ë‹¨ìœ„, ì§ì¥/í•™ì—…ìš´ ë³„ì ),
  "message": "ì˜¤ëŠ˜ì˜ ì´ìš´ ë©”ì‹œì§€ (2-3ë¬¸ì¥, ë¬˜ìš´ì´ ë§íˆ¬ë¡œ ê¹Œì¹ í•˜ì§€ë§Œ ë”°ëœ»í•˜ê²Œ)",
  "detail": {
    "love": "ì—°ì• ìš´ í•œì¤„ (ì§§ê³  ì„íŒ©íŠ¸ ìˆê²Œ, ë¬˜ìš´ì´ ë§íˆ¬)",
    "money": "ê¸ˆì „ìš´ í•œì¤„ (ì§§ê³  ì„íŒ©íŠ¸ ìˆê²Œ, ë¬˜ìš´ì´ ë§íˆ¬)",
    "health": "ê±´ê°•ìš´ í•œì¤„ (ì§§ê³  ì„íŒ©íŠ¸ ìˆê²Œ, ë¬˜ìš´ì´ ë§íˆ¬)",
    "work": "ì§ì¥/í•™ì—…ìš´ í•œì¤„ (ì§§ê³  ì„íŒ©íŠ¸ ìˆê²Œ, ë¬˜ìš´ì´ ë§íˆ¬)"
  },
  "luckyItem": "ì˜¤ëŠ˜ì˜ í–‰ìš´ ì•„ì´í…œ (êµ¬ì²´ì ì¸ ë¬¼ê±´)",
  "luckyColor": "ì˜¤ëŠ˜ì˜ í–‰ìš´ ìƒ‰ìƒ"
}

ë¬˜ìš´ì´ ë§íˆ¬ ì˜ˆì‹œ:
- "ì˜¤ëŠ˜ì€ ì¢€ ì‰¬ì–´. ë„¤ê°€ ëª»ë‚˜ì„œê°€ ì•„ë‹ˆì•¼. ìš°ì£¼ ì»¨ë””ì…˜ì´ ë³„ë¡œì•¼."
- "ëˆ„ê°€ ë„ ë³´ê³  ìˆê¸´ í•´... ê·¼ë° ë„¤ê°€ ëˆˆì¹˜ê°€ ì—†ì–´ì„œ ë¬¸ì œì§€."
- "ëˆ ì“°ì§€ ë§ˆ. ì˜¤ëŠ˜ ë„¤ ì§€ê°‘ì€ ìš°ì£¼ì˜ ë¸”ë™í™€ì´ì•¼."

ì‚¬ì£¼ì˜ ì¼ê°„, ì˜¤í–‰ íŠ¹ì„±ê³¼ ì˜¤ëŠ˜ ë‚ ì§œì˜ ì²œê°„ì§€ì§€ë¥¼ ê³ ë ¤í•´ì„œ ìš´ì„¸ë¥¼ ë´ì¤˜.`;

        try {
          const response = await fetch('https://api.anthropic.com/v1/messages', {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json',
            },
            body: JSON.stringify({
              model: 'claude-sonnet-4-20250514',
              max_tokens: 1000,
              messages: [
                { role: 'user', content: prompt }
              ]
            })
          });

          const data = await response.json();
          const text = data.content[0].text;
          
          // JSON íŒŒì‹±
          const fortune = JSON.parse(text);
          setTodayFortune(fortune);
        } catch (error) {
          console.error('ìš´ì„¸ ê°€ì ¸ì˜¤ê¸° ì‹¤íŒ¨:', error);
          // ì—ëŸ¬ ì‹œ ê¸°ë³¸ê°’
          setTodayFortune({
            overall: 3,
            love: 3,
            money: 3,
            health: 3,
            work: 3,
            message: "ìŒ... ìš°ì£¼ê°€ ì¢€ ë³µì¡í•˜ë„¤.\nì¼ë‹¨ ì˜¤ëŠ˜ì€ ë¬´ë¦¬í•˜ì§€ ë§ˆ.\në‚´ì¼ ë‹¤ì‹œ ë´ì¤„ê²Œ.",
            detail: {
              love: "ì˜¤ëŠ˜ì€ ì¡°ìš©íˆ ìˆì–´. ì¸ì—°ì€ ë„ë§ ì•ˆ ê°€.",
              money: "í° ì§€ì¶œì€ í”¼í•´. ìš°ì£¼ê°€ ê²½ê³ í•˜ê³  ìˆì–´.",
              health: "ë¬¼ ë§ì´ ë§ˆì…”. ê¸°ë³¸ì´ ì¤‘ìš”í•´.",
              work: "ê¸‰í•œ ì¼ ì—†ìœ¼ë©´ ì²œì²œíˆ í•´."
            },
            luckyItem: "ë”°ëœ»í•œ ì°¨",
            luckyColor: "ë³´ë¼ìƒ‰"
          });
        }
        
        setIsLoading(false);
      };

      // ì˜¨ë³´ë”© ì™„ë£Œ í›„ ìš´ì„¸ ê°€ì ¸ì˜¤ê¸°
      const handleOnboardingComplete = async (userInfo) => {
        setUserData(userInfo);
        saveUserData(userInfo); // localStorageì— ì €ì¥
        setScreen('main');
        await fetchFortune(userInfo);
      };

      const StarRating = ({ rating, max = 5 }) => (
        <div style={{ display: 'flex', gap: '2px' }}>
          {[...Array(max)].map((_, i) => {
            const starValue = i + 1;
            let fillPercentage = 0;
            
            if (rating >= starValue) {
              fillPercentage = 100;
            } else if (rating >= starValue - 0.5) {
              fillPercentage = 50;
            }
            
            return (
              <div key={i} style={{ position: 'relative', width: '20px', height: '20px' }}>
                {/* ë¹ˆ ë³„ (íšŒìƒ‰) */}
                <span style={{ 
                  fontSize: '18px',
                  filter: 'grayscale(1) opacity(0.3)',
                  position: 'absolute',
                }}>
                  â­
                </span>
                {/* ì±„ì›Œì§„ ë³„ */}
                <div style={{
                  position: 'absolute',
                  width: `${fillPercentage}%`,
                  overflow: 'hidden',
                }}>
                  <span style={{ fontSize: '18px' }}>â­</span>
                </div>
              </div>
            );
          })}
        </div>
      );

      // ìŠ¤í”Œë˜ì‹œ í™”ë©´
      const SplashScreen = () => (
        <div style={{
          height: '100%',
          display: 'flex',
          flexDirection: 'column',
          alignItems: 'center',
          justifyContent: 'center',
          background: 'linear-gradient(180deg, #1a1a2e 0%, #16213e 50%, #0f0f23 100%)',
          position: 'relative',
          overflow: 'hidden',
        }}>
          {/* ë³„ ë°°ê²½ */}
          <div style={{ position: 'absolute', inset: 0, overflow: 'hidden', pointerEvents: 'none' }}>
            {[...Array(30)].map((_, i) => (
              <div key={i} style={{
                position: 'absolute',
                width: Math.random() * 3 + 1 + 'px',
                height: Math.random() * 3 + 1 + 'px',
                background: '#fff',
                borderRadius: '50%',
                left: Math.random() * 100 + '%',
                top: Math.random() * 100 + '%',
                opacity: Math.random() * 0.7 + 0.3,
                animation: `twinkle ${Math.random() * 3 + 2}s ease-in-out infinite`,
              }} />
            ))}
          </div>

          {/* ê³ ì–‘ì´ ìºë¦­í„° */}
          <div style={{
            marginBottom: '20px',
            filter: 'drop-shadow(0 0 20px rgba(147, 112, 219, 0.5))',
            animation: 'float 3s ease-in-out infinite',
          }}>
            <MeowunCat size={140} />
          </div>

          {/* ë¡œê³  */}
          <div style={{
            fontFamily: '"Gaegu", cursive',
            fontSize: '48px',
            color: '#f5e6d3',
            textShadow: '2px 2px 0 #4a0080, -1px -1px 0 #9370db',
            letterSpacing: '4px',
            marginBottom: '8px',
          }}>
            ë¬˜ìš´
          </div>
          <div style={{
            fontFamily: '"Gaegu", cursive',
            fontSize: '20px',
            color: '#9370db',
            letterSpacing: '6px',
            marginBottom: '40px',
          }}>
            MEOWUN
          </div>

          <div style={{
            fontFamily: '"Gaegu", cursive',
            fontSize: '16px',
            color: '#a0a0a0',
            textAlign: 'center',
            lineHeight: 1.6,
            marginBottom: '40px',
          }}>
            ê¹Œì¹ í•œ ìš°ì£¼ ê³ ì–‘ì´ê°€ ì „í•˜ëŠ”<br />ì˜¤ëŠ˜ì˜ ìš´ì„¸
          </div>

          <button
            onClick={() => setScreen('onboarding')}
            style={{
              fontFamily: '"Gaegu", cursive',
              fontSize: '20px',
              padding: '16px 48px',
              background: 'linear-gradient(135deg, #9370db 0%, #4a0080 100%)',
              color: '#fff',
              border: 'none',
              borderRadius: '30px',
              cursor: 'pointer',
              boxShadow: '0 4px 20px rgba(147, 112, 219, 0.4)',
              transition: 'transform 0.2s, box-shadow 0.2s',
              position: 'relative',
              zIndex: 10,
            }}
            onMouseOver={(e) => {
              e.target.style.transform = 'scale(1.05)';
              e.target.style.boxShadow = '0 6px 30px rgba(147, 112, 219, 0.6)';
            }}
            onMouseOut={(e) => {
              e.target.style.transform = 'scale(1)';
              e.target.style.boxShadow = '0 4px 20px rgba(147, 112, 219, 0.4)';
            }}
          >
            ì‹œì‘í•˜ê¸°
          </button>
        </div>
      );

      // ì˜¨ë³´ë”© í™”ë©´
      const OnboardingScreen = () => {
        const [step, setStep] = useState(1);
        const [localData, setLocalData] = useState({ ...userData });

        const handleNext = () => {
          if (step < 3) {
            setStep(step + 1);
          } else {
            handleOnboardingComplete(localData);
          }
        };

        return (
          <div style={{
            height: '100%',
            display: 'flex',
            flexDirection: 'column',
            background: 'linear-gradient(180deg, #1a1a2e 0%, #16213e 100%)',
            padding: '40px 24px',
          }}>
            {/* ì§„í–‰ í‘œì‹œ */}
            <div style={{
              display: 'flex',
              gap: '8px',
              marginBottom: '40px',
              justifyContent: 'center',
            }}>
              {[1, 2, 3].map(i => (
                <div key={i} style={{
                  width: i === step ? '24px' : '8px',
                  height: '8px',
                  borderRadius: '4px',
                  background: i <= step ? '#9370db' : '#333',
                  transition: 'all 0.3s',
                }} />
              ))}
            </div>

            {/* ê³ ì–‘ì´ ë§í’ì„  */}
            <div style={{
              display: 'flex',
              alignItems: 'flex-start',
              gap: '12px',
              marginBottom: '32px',
            }}>
              <MeowunCat size={56} />
              <div style={{
                fontFamily: '"Gaegu", cursive',
                fontSize: '18px',
                color: '#f5e6d3',
                background: 'rgba(147, 112, 219, 0.2)',
                padding: '16px 20px',
                borderRadius: '4px 20px 20px 20px',
                lineHeight: 1.6,
                border: '2px solid rgba(147, 112, 219, 0.3)',
                whiteSpace: 'pre-line',
              }}>
                {step === 1 && "...ì™”ì–´? ì´ë¦„ì´ ë­ì•¼?\nëŒ€ì¶© ì•Œë ¤ì¤˜. ë³„ ë³¼ ë•Œ í•„ìš”í•˜ê±°ë“ ."}
                {step === 2 && "ìƒë…„ì›”ì¼... ì•Œë ¤ì¤˜.\nì‚¬ì£¼ ë³´ë ¤ë©´ í•„ìš”í•´."}
                {step === 3 && "íƒœì–´ë‚œ ì‹œê°„ë„ ì•Œì•„?\nëª¨ë¥´ë©´ ëŒ€ì¶© ë„£ì–´ë„ ë¼.\n...ê·¼ë° ì •í™•í• ìˆ˜ë¡ ì¢‹ê¸´ í•´."}
              </div>
            </div>

            {/* ì…ë ¥ í¼ */}
            <div style={{ flex: 1 }}>
              {step === 1 && (
                <div>
                  <label style={{
                    fontFamily: '"Gaegu", cursive',
                    fontSize: '16px',
                    color: '#9370db',
                    marginBottom: '8px',
                    display: 'block',
                  }}>ì´ë¦„</label>
                  <input
                    type="text"
                    value={localData.name}
                    onChange={(e) => setLocalData({ ...localData, name: e.target.value })}
                    placeholder="ì´ë¦„ì„ ì…ë ¥í•´ì¤˜"
                    style={{
                      width: '100%',
                      padding: '16px',
                      fontSize: '18px',
                      fontFamily: '"Gaegu", cursive',
                      background: 'rgba(255,255,255,0.1)',
                      border: '2px dashed #9370db',
                      borderRadius: '12px',
                      color: '#f5e6d3',
                      outline: 'none',
                      boxSizing: 'border-box',
                    }}
                  />
                </div>
              )}

              {step === 2 && (
                <div>
                  <label style={{
                    fontFamily: '"Gaegu", cursive',
                    fontSize: '16px',
                    color: '#9370db',
                    marginBottom: '8px',
                    display: 'block',
                  }}>ìƒë…„ì›”ì¼</label>
                  <input
                    type="date"
                    value={localData.birthDate}
                    onChange={(e) => setLocalData({ ...localData, birthDate: e.target.value })}
                    style={{
                      width: '100%',
                      padding: '16px',
                      fontSize: '18px',
                      fontFamily: '"Gaegu", cursive',
                      background: 'rgba(255,255,255,0.1)',
                      border: '2px dashed #9370db',
                      borderRadius: '12px',
                      color: '#f5e6d3',
                      outline: 'none',
                      boxSizing: 'border-box',
                    }}
                  />
                </div>
              )}

              {step === 3 && (
                <div>
                  <label style={{
                    fontFamily: '"Gaegu", cursive',
                    fontSize: '16px',
                    color: '#9370db',
                    marginBottom: '8px',
                    display: 'block',
                  }}>íƒœì–´ë‚œ ì‹œê°„</label>
                  <input
                    type="time"
                    value={localData.birthTime}
                    onChange={(e) => setLocalData({ ...localData, birthTime: e.target.value })}
                    style={{
                      width: '100%',
                      padding: '16px',
                      fontSize: '18px',
                      fontFamily: '"Gaegu", cursive',
                      background: 'rgba(255,255,255,0.1)',
                      border: '2px dashed #9370db',
                      borderRadius: '12px',
                      color: '#f5e6d3',
                      outline: 'none',
                      boxSizing: 'border-box',
                    }}
                  />
                  <p style={{
                    fontFamily: '"Gaegu", cursive',
                    fontSize: '14px',
                    color: '#666',
                    marginTop: '8px',
                  }}>
                    * ëª¨ë¥´ë©´ ë¹„ì›Œë‘¬ë„ ë¼
                  </p>
                </div>
              )}
            </div>

            {/* ë‹¤ìŒ ë²„íŠ¼ */}
            <button
              onClick={handleNext}
              disabled={
                (step === 1 && !localData.name) ||
                (step === 2 && !localData.birthDate)
              }
              style={{
                fontFamily: '"Gaegu", cursive',
                fontSize: '20px',
                padding: '16px',
                background: (step === 1 && !localData.name) || (step === 2 && !localData.birthDate)
                  ? '#333'
                  : 'linear-gradient(135deg, #9370db 0%, #4a0080 100%)',
                color: '#fff',
                border: 'none',
                borderRadius: '16px',
                cursor: (step === 1 && !localData.name) || (step === 2 && !localData.birthDate)
                  ? 'not-allowed'
                  : 'pointer',
                transition: 'all 0.2s',
              }}
            >
              {step === 3 ? 'ìš´ì„¸ ë³´ê¸° âœ¨' : 'ë‹¤ìŒ'}
            </button>
          </div>
        );
      };

      // ë©”ì¸ í™”ë©´ (ì˜¤ëŠ˜ì˜ ìš´ì„¸)
      const MainScreen = () => (
        <div style={{
          height: '100%',
          display: 'flex',
          flexDirection: 'column',
          background: 'linear-gradient(180deg, #1a1a2e 0%, #16213e 100%)',
        }}>
          {/* í—¤ë” */}
          <div style={{
            display: 'flex',
            justifyContent: 'space-between',
            alignItems: 'center',
            padding: '16px 20px',
          }}>
            <div style={{
              fontFamily: '"Gaegu", cursive',
              fontSize: '24px',
              color: '#f5e6d3',
            }}>
              ë¬˜ìš´ ğŸŒ™
            </div>
            <button
              onClick={() => setShowMyPage(true)}
              style={{
                background: 'none',
                border: 'none',
                fontSize: '24px',
                cursor: 'pointer',
              }}
            >
              ğŸ‘¤
            </button>
          </div>

          {/* ë¡œë”© ì¤‘ */}
          {isLoading ? (
            <div style={{
              flex: 1,
              display: 'flex',
              flexDirection: 'column',
              alignItems: 'center',
              justifyContent: 'center',
              padding: '20px',
            }}>
              <div style={{
                animation: 'float 2s ease-in-out infinite',
              }}>
                <MeowunCat size={120} />
              </div>
              <div style={{
                fontFamily: '"Gaegu", cursive',
                fontSize: '20px',
                color: '#f5e6d3',
                marginTop: '24px',
                textAlign: 'center',
                lineHeight: 1.6,
              }}>
                ìš°ì£¼ë¥¼ ì½ê³  ìˆì–´...<br />ì ê¹ë§Œ ê¸°ë‹¤ë ¤.
              </div>
              <div style={{
                fontFamily: '"Gaegu", cursive',
                fontSize: '14px',
                color: '#9370db',
                marginTop: '12px',
              }}>
                ğŸŒŸ âœ¨ ğŸŒ™
              </div>
            </div>
          ) : todayFortune ? (
            /* ìŠ¤í¬ë¡¤ ì˜ì—­ */
            <div style={{
              flex: 1,
              overflowY: 'auto',
              padding: '0 20px 20px',
            }}>
              {/* ì¸ì‚¬ */}
              <div style={{
                fontFamily: '"Gaegu", cursive',
                fontSize: '16px',
                color: '#9370db',
                marginBottom: '8px',
              }}>
                {new Date().toLocaleDateString('ko-KR', { month: 'long', day: 'numeric', weekday: 'long' })}
              </div>
              <div style={{
                fontFamily: '"Gaegu", cursive',
                fontSize: '24px',
                color: '#f5e6d3',
                marginBottom: '24px',
              }}>
                {userData.name || 'ì¹œêµ¬'}ì•¼, ì˜¤ëŠ˜ì˜ ìš´ì„¸ì•¼.
              </div>

              {/* ë©”ì¸ ìš´ì„¸ ì¹´ë“œ */}
              <div style={{
                background: 'rgba(147, 112, 219, 0.15)',
                border: '2px dashed rgba(147, 112, 219, 0.5)',
                borderRadius: '20px',
                padding: '24px',
                marginBottom: '20px',
                position: 'relative',
              }}>
                {/* ê³ ì–‘ì´ */}
                <div style={{
                  position: 'absolute',
                  top: '-35px',
                  right: '10px',
                  transform: 'rotate(10deg)',
                }}>
                  <MeowunCat size={70} />
                </div>

                <div style={{
                  fontFamily: '"Gaegu", cursive',
                  fontSize: '14px',
                  color: '#9370db',
                  marginBottom: '8px',
                }}>
                  ì˜¤ëŠ˜ì˜ ì´ìš´
                </div>
                
                <StarRating rating={todayFortune.overall} />
                
                <div style={{
                  fontFamily: '"Gaegu", cursive',
                  fontSize: '20px',
                  color: '#f5e6d3',
                  marginTop: '16px',
                  lineHeight: 1.8,
                  whiteSpace: 'pre-line',
                }}>
                  {todayFortune.message}
                </div>
              </div>

              {/* ì„¸ë¶€ ìš´ì„¸ - ë³„ì ê³¼ í•œì¤„ ë¬¸êµ¬ í•¨ê»˜ */}
              <div style={{
                display: 'grid',
                gridTemplateColumns: '1fr 1fr',
                gap: '12px',
                marginBottom: '20px',
              }}>
                {[
                  { key: 'love', emoji: 'ğŸ’•', label: 'ì—°ì• ìš´', rating: todayFortune.love },
                  { key: 'money', emoji: 'ğŸ’°', label: 'ê¸ˆì „ìš´', rating: todayFortune.money },
                  { key: 'health', emoji: 'ğŸŒ¿', label: 'ê±´ê°•ìš´', rating: todayFortune.health },
                  { key: 'work', emoji: 'ğŸ’¼', label: 'ì§ì¥ìš´', rating: todayFortune.work },
                ].map(item => (
                  <div key={item.key} style={{
                    background: 'rgba(255,255,255,0.05)',
                    border: '1px solid rgba(147, 112, 219, 0.3)',
                    borderRadius: '16px',
                    padding: '16px',
                  }}>
                    <div style={{
                      display: 'flex',
                      alignItems: 'center',
                      gap: '8px',
                      marginBottom: '8px',
                    }}>
                      <span style={{ fontSize: '20px' }}>{item.emoji}</span>
                      <span style={{
                        fontFamily: '"Gaegu", cursive',
                        fontSize: '14px',
                        color: '#9370db',
                      }}>{item.label}</span>
                    </div>
                    <StarRating rating={item.rating} />
                    <div style={{
                      fontFamily: '"Gaegu", cursive',
                      fontSize: '14px',
                      color: '#f5e6d3',
                      marginTop: '10px',
                      lineHeight: 1.5,
                    }}>
                      {todayFortune.detail[item.key]}
                    </div>
                  </div>
                ))}
              </div>

              {/* í–‰ìš´ ì•„ì´í…œ & ìƒ‰ìƒ */}
              <div style={{
                background: 'rgba(255, 215, 0, 0.1)',
                border: '1px solid rgba(255, 215, 0, 0.3)',
                borderRadius: '16px',
                padding: '16px',
                marginBottom: '20px',
              }}>
                <div style={{
                  fontFamily: '"Gaegu", cursive',
                  fontSize: '16px',
                  color: '#ffd700',
                  marginBottom: '12px',
                }}>
                  âœ¨ ì˜¤ëŠ˜ì˜ í–‰ìš´
                </div>
                <div style={{
                  display: 'flex',
                  gap: '12px',
                }}>
                  <div style={{
                    flex: 1,
                    background: 'rgba(0,0,0,0.2)',
                    borderRadius: '12px',
                    padding: '12px',
                    textAlign: 'center',
                  }}>
                    <div style={{ fontSize: '24px', marginBottom: '4px' }}>ğŸ€</div>
                    <div style={{
                      fontFamily: '"Gaegu", cursive',
                      fontSize: '12px',
                      color: '#9370db',
                      marginBottom: '4px',
                    }}>í–‰ìš´ ì•„ì´í…œ</div>
                    <div style={{
                      fontFamily: '"Gaegu", cursive',
                      fontSize: '14px',
                      color: '#f5e6d3',
                    }}>{todayFortune.luckyItem}</div>
                  </div>
                  <div style={{
                    flex: 1,
                    background: 'rgba(0,0,0,0.2)',
                    borderRadius: '12px',
                    padding: '12px',
                    textAlign: 'center',
                  }}>
                    <div style={{ fontSize: '24px', marginBottom: '4px' }}>ğŸ¨</div>
                    <div style={{
                      fontFamily: '"Gaegu", cursive',
                      fontSize: '12px',
                      color: '#9370db',
                      marginBottom: '4px',
                    }}>í–‰ìš´ ìƒ‰ìƒ</div>
                    <div style={{
                      fontFamily: '"Gaegu", cursive',
                      fontSize: '14px',
                      color: '#f5e6d3',
                    }}>{todayFortune.luckyColor}</div>
                  </div>
                </div>
              </div>

              {/* ë¬˜ìš´ì´ì˜ í•œë§ˆë”” */}
              <div style={{
                background: 'rgba(74, 0, 128, 0.3)',
                borderRadius: '16px',
                padding: '20px',
                marginBottom: '20px',
              }}>
                <div style={{
                  display: 'flex',
                  alignItems: 'center',
                  gap: '8px',
                  marginBottom: '12px',
                }}>
                  <MeowunCat size={32} />
                  <span style={{
                    fontFamily: '"Gaegu", cursive',
                    fontSize: '16px',
                    color: '#9370db',
                  }}>ë¬˜ìš´ì´ì˜ í•œë§ˆë””</span>
                </div>
                <div style={{
                  fontFamily: '"Gaegu", cursive',
                  fontSize: '18px',
                  color: '#f5e6d3',
                  lineHeight: 1.8,
                }}>
                  "ì˜¤ëŠ˜ í•˜ë£¨ë„ ì˜ ë²„í…¨. ë‚´ê°€ ì§€ì¼œë³´ê³  ìˆì„ê²Œ... ì•„ë§ˆë„."
                </div>
              </div>

              {/* ê³µìœ  ë²„íŠ¼ */}
              <button
                onClick={() => setShowShareCard(true)}
                style={{
                  width: '100%',
                  fontFamily: '"Gaegu", cursive',
                  fontSize: '18px',
                  padding: '16px',
                  background: 'linear-gradient(135deg, #9370db 0%, #4a0080 100%)',
                  color: '#fff',
                  border: 'none',
                  borderRadius: '16px',
                  cursor: 'pointer',
                  display: 'flex',
                  alignItems: 'center',
                  justifyContent: 'center',
                  gap: '8px',
                }}
              >
                <span>ì¹œêµ¬ì—ê²Œ ê³µìœ í•˜ê¸°</span>
                <span>ğŸ“¤</span>
              </button>
            </div>
          ) : null}

          {/* í•˜ë‹¨ ê´‘ê³  ë°°ë„ˆ */}
          <div style={{
            height: '60px',
            background: 'rgba(0,0,0,0.3)',
            display: 'flex',
            alignItems: 'center',
            justifyContent: 'center',
            borderTop: '1px solid rgba(147, 112, 219, 0.2)',
          }}>
            <span style={{
              fontFamily: '"Gaegu", cursive',
              fontSize: '14px',
              color: '#666',
            }}>
              ğŸ“¢ ê´‘ê³  ë°°ë„ˆ ì˜ì—­
            </span>
          </div>
        </div>
      );

      // ê³µìœ  ì¹´ë“œ ëª¨ë‹¬
      const ShareCardModal = () => (
        <div style={{
          position: 'fixed',
          inset: 0,
          background: 'rgba(0,0,0,0.8)',
          display: 'flex',
          flexDirection: 'column',
          alignItems: 'center',
          justifyContent: 'center',
          padding: '20px',
          zIndex: 100,
        }}>
          {/* ê³µìœ  ì¹´ë“œ */}
          <div style={{
            width: '100%',
            maxWidth: '320px',
            background: 'linear-gradient(180deg, #1a1a2e 0%, #0f0f23 100%)',
            borderRadius: '24px',
            padding: '32px 24px',
            border: '2px solid rgba(147, 112, 219, 0.5)',
            position: 'relative',
            marginBottom: '20px',
          }}>
            {/* ë³„ ì¥ì‹ */}
            <div style={{
              position: 'absolute',
              top: '16px',
              left: '16px',
              fontSize: '20px',
            }}>âœ¨</div>
            <div style={{
              position: 'absolute',
              top: '16px',
              right: '16px',
              fontSize: '20px',
            }}>ğŸŒ™</div>

            {/* ë¡œê³  */}
            <div style={{
              textAlign: 'center',
              marginBottom: '20px',
            }}>
              <div style={{
                fontFamily: '"Gaegu", cursive',
                fontSize: '28px',
                color: '#f5e6d3',
              }}>ë¬˜ìš´</div>
              <div style={{
                fontFamily: '"Gaegu", cursive',
                fontSize: '12px',
                color: '#9370db',
                letterSpacing: '4px',
              }}>MEOWUN</div>
            </div>

            {/* ê³ ì–‘ì´ */}
            <div style={{
              display: 'flex',
              justifyContent: 'center',
              marginBottom: '16px',
            }}>
              <MeowunCat size={90} />
            </div>

            {/* ë©”ì‹œì§€ */}
            <div style={{
              fontFamily: '"Gaegu", cursive',
              fontSize: '20px',
              color: '#f5e6d3',
              textAlign: 'center',
              lineHeight: 1.8,
              marginBottom: '20px',
              whiteSpace: 'pre-line',
            }}>
              "{todayFortune.message}"
            </div>

            {/* ë³„ì  */}
            <div style={{
              display: 'flex',
              justifyContent: 'center',
              marginBottom: '16px',
            }}>
              <StarRating rating={todayFortune.overall} />
            </div>

            {/* ë‚ ì§œì™€ ì´ë¦„ */}
            <div style={{
              fontFamily: '"Gaegu", cursive',
              fontSize: '14px',
              color: '#666',
              textAlign: 'center',
            }}>
              {new Date().toLocaleDateString('ko-KR')} | {userData.name || 'ì¹œêµ¬'}
            </div>
          </div>

          {/* ë²„íŠ¼ë“¤ */}
          <div style={{
            display: 'flex',
            gap: '12px',
            width: '100%',
            maxWidth: '320px',
          }}>
            <button
              style={{
                flex: 1,
                fontFamily: '"Gaegu", cursive',
                fontSize: '16px',
                padding: '14px',
                background: 'rgba(255,255,255,0.1)',
                color: '#fff',
                border: '1px solid rgba(255,255,255,0.2)',
                borderRadius: '12px',
                cursor: 'pointer',
              }}
            >
              ğŸ“¥ ì €ì¥
            </button>
            <button
              style={{
                flex: 1,
                fontFamily: '"Gaegu", cursive',
                fontSize: '16px',
                padding: '14px',
                background: '#FEE500',
                color: '#000',
                border: 'none',
                borderRadius: '12px',
                cursor: 'pointer',
              }}
            >
              ğŸ’¬ ì¹´ì¹´ì˜¤í†¡
            </button>
            <button
              style={{
                flex: 1,
                fontFamily: '"Gaegu", cursive',
                fontSize: '16px',
                padding: '14px',
                background: 'linear-gradient(45deg, #f09433, #e6683c, #dc2743, #cc2366, #bc1888)',
                color: '#fff',
                border: 'none',
                borderRadius: '12px',
                cursor: 'pointer',
              }}
            >
              ğŸ“· ì¸ìŠ¤íƒ€
            </button>
          </div>

          {/* ë‹«ê¸° */}
          <button
            onClick={() => setShowShareCard(false)}
            style={{
              marginTop: '20px',
              fontFamily: '"Gaegu", cursive',
              fontSize: '16px',
              color: '#666',
              background: 'none',
              border: 'none',
              cursor: 'pointer',
            }}
          >
            ë‹«ê¸°
          </button>
        </div>
      );

      // ë§ˆì´í˜ì´ì§€ ëª¨ë‹¬
      const MyPageModal = () => (
        <div style={{
          position: 'fixed',
          inset: 0,
          background: 'rgba(0,0,0,0.9)',
          display: 'flex',
          flexDirection: 'column',
          zIndex: 100,
        }}>
          {/* í—¤ë” */}
          <div style={{
            display: 'flex',
            justifyContent: 'space-between',
            alignItems: 'center',
            padding: '16px 20px',
            borderBottom: '1px solid rgba(147, 112, 219, 0.2)',
          }}>
            <div style={{
              fontFamily: '"Gaegu", cursive',
              fontSize: '24px',
              color: '#f5e6d3',
            }}>
              ë§ˆì´í˜ì´ì§€
            </div>
            <button
              onClick={() => setShowMyPage(false)}
              style={{
                fontFamily: '"Gaegu", cursive',
                fontSize: '16px',
                color: '#9370db',
                background: 'none',
                border: 'none',
                cursor: 'pointer',
              }}
            >
              ë‹«ê¸°
            </button>
          </div>

          {/* ì»¨í…ì¸  */}
          <div style={{
            flex: 1,
            padding: '24px 20px',
            overflowY: 'auto',
          }}>
            {/* í”„ë¡œí•„ ì¹´ë“œ */}
            <div style={{
              background: 'rgba(147, 112, 219, 0.15)',
              borderRadius: '20px',
              padding: '24px',
              marginBottom: '24px',
              textAlign: 'center',
            }}>
              <div style={{ display: 'flex', justifyContent: 'center', marginBottom: '16px' }}>
                <MeowunCat size={80} />
              </div>
              <div style={{
                fontFamily: '"Gaegu", cursive',
                fontSize: '24px',
                color: '#f5e6d3',
              }}>
                {userData.name || 'ì´ë¦„ ì—†ìŒ'}
              </div>
            </div>

            {/* ì •ë³´ ì„¹ì…˜ */}
            <div style={{
              background: 'rgba(255,255,255,0.05)',
              borderRadius: '16px',
              overflow: 'hidden',
            }}>
              {[
                { label: 'ì´ë¦„', value: userData.name || '-' },
                { label: 'ìƒë…„ì›”ì¼', value: userData.birthDate || '-' },
                { label: 'íƒœì–´ë‚œ ì‹œê°„', value: userData.birthTime || 'ëª¨ë¦„' },
              ].map((item, i) => (
                <div key={i} style={{
                  display: 'flex',
                  justifyContent: 'space-between',
                  alignItems: 'center',
                  padding: '16px 20px',
                  borderBottom: i < 2 ? '1px solid rgba(255,255,255,0.05)' : 'none',
                }}>
                  <span style={{
                    fontFamily: '"Gaegu", cursive',
                    fontSize: '16px',
                    color: '#9370db',
                  }}>{item.label}</span>
                  <span style={{
                    fontFamily: '"Gaegu", cursive',
                    fontSize: '16px',
                    color: '#f5e6d3',
                  }}>{item.value}</span>
                </div>
              ))}
            </div>

            {/* ìˆ˜ì • ë²„íŠ¼ */}
            <button style={{
              width: '100%',
              marginTop: '16px',
              fontFamily: '"Gaegu", cursive',
              fontSize: '16px',
              padding: '14px',
              background: 'rgba(147, 112, 219, 0.2)',
              color: '#9370db',
              border: '1px dashed #9370db',
              borderRadius: '12px',
              cursor: 'pointer',
            }}>
              ì •ë³´ ìˆ˜ì •í•˜ê¸°
            </button>
          </div>
        </div>
      );

      return (
        <div style={{
          width: '100%',
          height: '100%',
          background: '#0f0f23',
          overflow: 'hidden',
          position: 'relative',
          fontFamily: 'sans-serif',
        }}>
          {screen === 'splash' && <SplashScreen />}
          {screen === 'onboarding' && <OnboardingScreen />}
          {screen === 'main' && <MainScreen />}
          
          {showShareCard && <ShareCardModal />}
          {showMyPage && <MyPageModal />}
        </div>
      );
    };

    ReactDOM.createRoot(document.getElementById('root')).render(<MeowunApp />);
  </script>
  
  <!-- ì„œë¹„ìŠ¤ ì›Œì»¤ ë“±ë¡ -->
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('sw.js')
          .then((registration) => {
            console.log('SW registered:', registration);
          })
          .catch((error) => {
            console.log('SW registration failed:', error);
          });
      });
    }
  </script>
</body>
</html>
